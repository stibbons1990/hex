
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://stibbons1990.github.io/hex/blog/2022/11/12/ubuntu-studio-2204-on-computer-for-a-young-artist/">
      
      
        <link rel="prev" href="../../05/the-weirdest-corrupted-video-on-an-nvidia-card/">
      
      
        <link rel="next" href="../../../../2023/03/25/single-node-kubernetes-cluster-on-ubuntu-server-lexicon/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>Ubuntu Studio 22.04 on Computer, for a young artist - Inadvisably Applied Magic</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-Y167L3ZVGY"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-Y167L3ZVGY",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-Y167L3ZVGY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
   <link href="../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prepare-120-gb-ssd-in-rapture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Inadvisably Applied Magic" class="md-header__button md-logo" aria-label="Inadvisably Applied Magic" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m64 416 104.6-235.3c15.3-34.4 40.3-63.5 72-83.7L387.5 3c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5l-59.8 149.2c-1.9 4.7-2.8 9.7-2.8 14.7 0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4c-2.2-6.4-8.3-10.8-15.2-10.8s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5c-6.5 2.2-10.9 8.3-10.9 15.2s4.4 13 10.9 15.2l40.4 13.5 11.8 35.3H64zm215.6-274.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448h448c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Inadvisably Applied Magic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ubuntu Studio 22.04 on Computer, for a young artist
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="green"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="green"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Inadvisably Applied Magic" class="md-nav__button md-logo" aria-label="Inadvisably Applied Magic" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m64 416 104.6-235.3c15.3-34.4 40.3-63.5 72-83.7L387.5 3c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5l-59.8 149.2c-1.9 4.7-2.8 9.7-2.8 14.7 0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4c-2.2-6.4-8.3-10.8-15.2-10.8s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5c-6.5 2.2-10.9 8.3-10.9 15.2s4.4 13 10.9 15.2l40.4 13.5 11.8 35.3H64zm215.6-274.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448h448c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>

    </a>
    Inadvisably Applied Magic
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About This Place
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../conmon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Continuous Monitoring
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unexpected Linux Adventures
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/tapo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tapo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/github/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    github
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mkdocs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/material/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    material
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/intel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    intel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/nuc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nuc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/self-hosted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    self-hosted
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/music/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    music
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/streaming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    streaming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/media/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    media
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/navidrome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    navidrome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/photo-albums/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    photo-albums
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/photoprism/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    photoprism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/homebox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    homebox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/inventory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inventory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/activitywatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ActivityWatch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/time-tracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    time-tracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ebook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/komga/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    komga
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/firefly-iii/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefly-iii
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/studio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    studio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/desktop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    desktop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/steam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    steam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/proton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    proton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/videogames/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    videogames
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/bethesda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bethesda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/fallout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fallout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/raspberrypi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    raspberrypi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/influxdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    influxdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    grafana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/minecraft/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    minecraft
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/bedrock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bedrock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/audiobookshelf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audiobookshelf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/audiobooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audiobooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/encryption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    encryption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/veracrypt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    veracrypt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/luks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    luks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cryptsetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cryptsetup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/displaycal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    displaycal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/skyrim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    skyrim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/mods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/audio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/recording/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    recording
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/alsa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    alsa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/headphones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    headphones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ea/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ea
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/bioware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bioware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/jekyll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jekyll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/plex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/xhci/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xhci
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/usb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/failure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    failure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/workaround/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    workaround
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/asus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/mediatek/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mediatek
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/glitch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glitch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/timeout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timeout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/keyboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keyboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/macropad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macropad
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/qmk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qmk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/firmware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firmware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vscode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/nvidia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nvidia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/gpuburn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gpuburn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cuda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/crucial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crucial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ssd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ssd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/locales/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locales
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/chrome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chrome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/firefox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/raid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/btrfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Btrfs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/intel-nuc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intel NUC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/audible/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audible
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/bash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/mp3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MP3
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prepare-120-gb-ssd-in-rapture" class="md-nav__link">
    Prepare 120 GB SSD in Rapture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-ubuntu-studio-2204-in-rapture" class="md-nav__link">
    Install Ubuntu Studio 22.04 (in Rapture)
  </a>
  
    <nav class="md-nav" aria-label="Install Ubuntu Studio 22.04 (in Rapture)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nvidia-drivers" class="md-nav__link">
    NVidia drivers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-software" class="md-nav__link">
    Install Software
  </a>
  
    <nav class="md-nav" aria-label="Install Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt-packages" class="md-nav__link">
    APT packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-chrome" class="md-nav__link">
    Google Chrome
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steam" class="md-nav__link">
    Steam
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minecraft" class="md-nav__link">
    Minecraft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-monitoring" class="md-nav__link">
    Continuous Monitoring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-configuration" class="md-nav__link">
    System Configuration
  </a>
  
    <nav class="md-nav" aria-label="System Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logitech-trackman-marble" class="md-nav__link">
    Logitech Trackman Marble
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-server" class="md-nav__link">
    SSH Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-ips-on-lan" class="md-nav__link">
    Multiple IPs on LAN
  </a>
  
    <nav class="md-nav" aria-label="Multiple IPs on LAN">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wake-on-lan" class="md-nav__link">
    Wake-on-LAN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sddm-look-good" class="md-nav__link">
    Make SDDM Look Good
  </a>
  
    <nav class="md-nav" aria-label="Make SDDM Look Good">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-sddm-listen-to-tcp" class="md-nav__link">
    Make SDDM Listen to TCP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-specific-settings" class="md-nav__link">
    User-specific Settings
  </a>
  
    <nav class="md-nav" aria-label="User-specific Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redshift" class="md-nav__link">
    RedShift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wacom-tablet" class="md-nav__link">
    Wacom tablet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scratch-30-in-chrome" class="md-nav__link">
    Scratch 3.0 in Chrome
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roccat-tools" class="md-nav__link">
    Roccat Tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parental-controls" class="md-nav__link">
    Parental Controls
  </a>
  
    <nav class="md-nav" aria-label="Parental Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#squid-proxy" class="md-nav__link">
    Squid Proxy
  </a>
  
    <nav class="md-nav" aria-label="Squid Proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-youtube" class="md-nav__link">
    Block YouTube
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#squid-analyzer" class="md-nav__link">
    Squid Analyzer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kioskify-browsers" class="md-nav__link">
    Kioskify browsers
  </a>
  
    <nav class="md-nav" aria-label="Kioskify browsers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-chrome_1" class="md-nav__link">
    Google Chrome
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crontab-playtime" class="md-nav__link">
    Crontab Playtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crontab-bedtime" class="md-nav__link">
    Crontab Bedtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-tracking" class="md-nav__link">
    Time Tracking
  </a>
  
    <nav class="md-nav" aria-label="Time Tracking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#poll-focused-window-every-second" class="md-nav__link">
    poll-focused-window-every-second
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#report-daily-time-per-focused-window" class="md-nav__link">
    report-daily-time-per-focused-window
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desktop-timelapses" class="md-nav__link">
    Desktop Timelapses
  </a>
  
    <nav class="md-nav" aria-label="Desktop Timelapses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#take-a-screenshot-every-second" class="md-nav__link">
    take-a-screenshot-every-second
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-all-timelapses-from-screenshots" class="md-nav__link">
    make-all-timelapses-from-screenshots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-one-timelapse-from-screenshots" class="md-nav__link">
    make-one-timelapse-from-screenshots
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__title">
                <div class="md-nav__link">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
              </li>
              <li class="md-nav__item">
                <div class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                  <time datetime="2022-11-12 00:00:00" class="md-ellipsis">November 12, 2022</time>
                </div>
              </li>
              
              
                <li class="md-nav__item">
                  <div class="md-nav__link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                    <span class="md-ellipsis">
                      in
                      
                        <a href="../../../../category/linux/">linux</a>, 
                        <a href="../../../../category/ubuntu/">ubuntu</a>, 
                        <a href="../../../../category/installation/">installation</a>, 
                        <a href="../../../../category/setup/">setup</a></span>
                  </div>
                </li>
              
              
                
                <li class="md-nav__item">
                  <div class="md-nav__link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                    <span class="md-ellipsis">
                      
                        26 min read
                      
                    </span>
                  </div>
                </li>
              
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        


  <h1>Ubuntu Studio 22.04 on Computer, for a young artist</h1>

<div><p>The young artist in the house, who will soon have an upgraded
PC for the new year, will be then running
<a href="https://ubuntustudio.org/"><strong>Ubuntu Studio</strong></a> <strong>22.04</strong>,
made for creative people.</p>
<p>The current system is running Ubuntu Studio 20.04 on a <em>very</em>
old system, based on an AMD Phenom II X4 and an Asus M4A89GTD
Pro/USB3 from 2010. In preparation for the upcoming upgrade,
the process starts by installing Ubuntu Studio 22.04 on a old
SSD on my own PC (<strong>Rapture</strong>), which can later be
<em>transplanted</em> to the new PC.</p>
<!-- more -->

<h2 id="prepare-120-gb-ssd-in-rapture">Prepare 120 GB SSD in Rapture</h2>
<p>If only out of convenience, because this disk is already in Rapture and no longer in use, we’ll install a new
<a href="https://ubuntustudio.org/ubuntu-studio-22-04-lts-release-notes/">Ubuntu Studio 22.04.1 LTS</a>
on an old
<a href="https://www.samsung.com/uk/support/model/MZ-7TD120BW/">Samsung SSD 840 Basic 120GB SATA</a>
which has been working flawlessly since August 2013.</p>
<p>The current partition table has 3 partitions, all too small
for today’s Ubuntu (for me):</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp"># </span>fdisk<span class="w"> </span>-l<span class="w"> </span>/dev/sde
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="go">Disk /dev/sde: 111.79 GiB, 120034123776 bytes, 234441648 sectors</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">Disk model: Samsung SSD 840 </span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">Units: sectors of 1 * 512 = 512 bytes</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="go">Sector size (logical/physical): 512 bytes / 512 bytes</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">I/O size (minimum/optimal): 512 bytes / 512 bytes</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">Disklabel type: dos</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">Disk identifier: 0x6d4c7104</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">Device     Boot     Start       End  Sectors  Size Id Type</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">/dev/sde1  *         2048  83888127 83886080   40G 83 Linux</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">/dev/sde2        83888128 167774207 83886080   40G 83 Linux</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">/dev/sde3       167774208 234441647 66667440 31.8G 83 Linux</span>
</span></code></pre></div>
<p>Previous systems in this disk are Ubuntu Studio 20.04 on
<code>/dev/sde1</code> (<code>/</code>) and <code>/dev/sde3</code> (<code>/usr</code>) because it
wouldn’t fit in <code>/dev/sde1</code> alone;
and Ubuntu 18.04 in <code>/dev/sde2</code>.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gp"># </span>df<span class="w"> </span>-h
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="go">Filesystem      Size  Used Avail Use% Mounted on</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="go">/dev/sde3        32G   18G   13G  59% /media/ponder/… (Ubuntu 20.04 /)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="go">/dev/sde2        40G   27G   13G  68% /media/ponder/… (Ubuntu 18.04 /)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="go">/dev/sde1        40G   29G  8.6G  78% /media/ponder/… (Ubuntu 20.04 /usr)</span>
</span></code></pre></div>
<p>First, back these up to the old RAID1 in Rapture, using a
small script <code>backup-root-fs</code> to keep track of all the
<code>--exclude</code> flags:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nv">src</span><span class="o">=</span><span class="nv">$1</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nv">dst</span><span class="o">=</span><span class="nv">$2</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nb">time</span><span class="w"> </span>rsync<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span>-avxHAX<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">  </span>--progress<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">  </span>--numeric-ids<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s2">"</span><span class="nv">$src</span><span class="s2">/dev"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s2">"</span><span class="nv">$src</span><span class="s2">/proc"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s2">"</span><span class="nv">$src</span><span class="s2">/sys"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s1">'/dev'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s1">'/proc'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">  </span>--exclude<span class="o">=</span><span class="s1">'/sys'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="nv">$src</span><span class="w"> </span><span class="nv">$dst</span>
</span></code></pre></div></td></tr></table></div>
<p>Used this script to backup all the old Ubuntu Studio's
partitions:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="gp"># </span>/root/backup-root-fs<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span>/media/ponder/518be5a3-5c8c-4674-a4b1-bebf455dc61f/@/<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span>/home/raid/backups/ubuntu-18.04/
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="gp"># </span>/root/backup-root-fs<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span>/media/ponder/498381d9-71e8-4941-a682-e37302da5392/<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span>/home/raid/backups/ubuntu-20.04/
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="gp"># </span>rm<span class="w"> </span>-f<span class="w"> </span>/home/raid/backups/ubuntu-20.04/usr
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="gp"># </span>mkdir<span class="w"> </span>/home/raid/backups/ubuntu-20.04/usr
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="gp"># </span>/root/backup-root-fs<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">  </span>/media/ponder/f8f7aee8-e172-4eda-bf9e-962dbfb51331<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">  </span>/home/raid/backups/ubuntu-20.04/usr/
</span></code></pre></div>
<p>Both Ubuntu 20.04 and 22.04 take about 45 GB in their roots:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="gp"># </span>du<span class="w"> </span>-sh<span class="w"> </span>/home/raid/backups/ubuntu-*
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="go">27G     /home/raid/backups/ubuntu-18.04</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="go">46G     /home/raid/backups/ubuntu-20.04</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="gp"># </span>df<span class="w"> </span>-h
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="go">Filesystem      Size  Used Avail Use% Mounted on</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="go">tmpfs           3.2G  2.4M  3.2G   1% /run</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="go">/dev/nvme0n1p2   50G   44G  3.2G  94% /</span>
</span></code></pre></div>
<p>Rather than spend hours trying to delete unused clutter, because there is no longer enough unused clutter that it would make a dent in disk usage, we need to plan for bigger root filesystems in the new partition schema.</p>
<p>Assuming a root filesystem of at least 45 GB, make that 50 GB, set that as the 70% (or less) of desired partition size 
(<a href="https://www.newegg.com/insider/does-ssd-size-affect-speed/">use the 70/30 rule to optimize your system</a> to 
<a href="https://pureinfotech.com/why-solid-state-drive-ssd-performance-slows-down/">keep SSDs speedy</a>),
which means at least 71.42 GB, make that 75 GB or more.</p>
<p>In the new 2000 GB m.2 SSD in Rapture, that’d mean converting the 3 50 GB partitions into 2 75 GB partitions, which is necessarily a destructive change for all partitions. Luckily the current system root is on the first of the 3, so we can start by replacing the other 2 with a 75 GB partition, and possibly enlarging the root filesystem later with parted on a USB stick.</p>
<p>In the old 120 GB SSD for Computer, we could get away with 2 60 GB partitions, which would be slightly smaller, but there is a newer 250 GB SSD in Computer we can use later for a future system’s root filesystem, so we might as well take the whole disk with now.</p>
<p>Create a 250 MB EFI partition, just in case this disk is moved to an EFI-capable system.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="gp"># </span>umount<span class="w"> </span>/media/ponder/518be5a3-5c8c-4674-a4b1-bebf455dc61f
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="gp"># </span>umount<span class="w"> </span>/media/ponder/f8f7aee8-e172-4eda-bf9e-962dbfb51331
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="gp"># </span>umount<span class="w"> </span>/media/ponder/498381d9-71e8-4941-a682-e37302da5392
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="gp"># </span>fdisk<span class="w"> </span>/dev/sde
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="go">…</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="go">Disk /dev/sde: 111.79 GiB, 120034123776 bytes, 234441648 sectors</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="go">Disk model: Samsung SSD 840 </span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="go">Units: sectors of 1 * 512 = 512 bytes</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="go">Sector size (logical/physical): 512 bytes / 512 bytes</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="go">I/O size (minimum/optimal): 512 bytes / 512 bytes</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="go">Disklabel type: dos</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="go">Disk identifier: 0x6d4c7104</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="go">Device     Boot  Start       End   Sectors   Size Id Type</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="go">/dev/sde1         2048    514047    512000   250M 83 Linux</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="go">/dev/sde2  *    514048 234441647 233927600 111.5G 83 Linux</span>
</span></code></pre></div>
<h2 id="install-ubuntu-studio-2204-in-rapture">Install Ubuntu Studio 22.04 (in Rapture)</h2>
<p>Prepared the USB stick with <code>usb-creator-kde</code> and booted into
it, then used the “Install Ubuntu” launcher on the desktop.</p>
<ol>
<li>Boot from USB, with the option to <strong>Try or Install Ubuntu</strong></li>
<li>Select language (English) and then <strong>Install Ubuntu</strong></li>
<li>Select time zone and keyboard layout.</li>
<li>Select Type of install: <strong>Ubuntu Server (not minimized)</strong></li>
<li>For <strong>Storage configuration</strong> select <strong>Custom storage layout</strong></li>
<li>Select storage device: <strong>Samsung SSD 840 Series 120 GB</strong>
     and then <strong>Erase disk</strong>.</li>
<li>Boot loader location: <strong>MBR on /dev/sdd (120 GB SSD)</strong> ─
     not on another disk!</li>
<li>Create partition 1 (250 MB) as <strong>EFI System Partition</strong> mounted on <code>/boot/efi</code></li>
<li>Create partition 2 (111.55 GiB) <strong>ext4</strong> mounted on <code>/</code></li>
<li>Select <strong>Install Now</strong> to confirm the partition selection.</li>
<li>Confirm first non-root user name (<code>ponder</code>) and computer
   name (<code>computer</code>).</li>
<li>Once it's done, select <strong>Restart</strong>
   (remove install media and hit <code>Enter</code>).</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While this SSD is in Rapture, booting into this new system requires
selecting the 120 GB disk in the BIOS boot menu (F8 / F10).</p>
</div>
<h3 id="nvidia-drivers">NVidia drivers</h3>
<p>With the new kernel running, bring the system up to date
with all the updates and install NVidia drivers:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="gp"># </span>apt<span class="w"> </span>update
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="gp"># </span>apt<span class="w"> </span>dist-upgrade
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>gkrellm<span class="w"> </span>nvidia-settings<span class="w"> </span>nvidia-driver-520<span class="w"> </span>xserver-xorg-video-nvidia-520<span class="w"> </span>-y
</span></code></pre></div>
<h2 id="install-software">Install Software</h2>
<h3 id="apt-packages">APT packages</h3>
<p>The first thing I like to do is installing everything that is
easily to install with APT:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>gdebi-core<span class="w"> </span>wget<span class="w"> </span>gkrellm<span class="w"> </span>vim<span class="w"> </span>curl<span class="w"> </span>gkrellm-hdplop<span class="w"> </span>gkrellm-x86info<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span>gkrellm-xkb<span class="w"> </span>gkrellm-cpufreq<span class="w"> </span>geeqie<span class="w"> </span>playonlinux<span class="w"> </span>exfat-fuse<span class="w"> </span>clementine<span class="w"> </span>id3v2<span class="w"> </span>htop<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span>vnstat<span class="w"> </span>neofetch<span class="w"> </span>tigervnc-viewer<span class="w"> </span>xcalib<span class="w"> </span>scummvm<span class="w"> </span>wine<span class="w"> </span>gamemode<span class="w"> </span>python-is-python3<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span>exiv2<span class="w"> </span>python3-selenium<span class="w"> </span>sox<span class="w"> </span>speedtest-cli<span class="w"> </span>python3-pip<span class="w"> </span>netcat<span class="w"> </span>rename<span class="w"> </span>scrot<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span>jstest-gtk<span class="w"> </span>etherwake<span class="w"> </span>lm-sensors<span class="w"> </span>sysstat<span class="w"> </span>ttf-mscorefonts-installer<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">  </span>ttf-mscorefonts-installer:i386<span class="w"> </span>tigervnc-tools<span class="w"> </span>winetricks<span class="w"> </span>icc-profiles<span class="w"> </span>tor<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">  </span>unrar<span class="w"> </span>iotop-c<span class="w"> </span>xdotool<span class="w"> </span>redshift-gtk<span class="w"> </span>inxi<span class="w"> </span>vainfo<span class="w"> </span>vdpauinfo<span class="w"> </span>ffmpeg<span class="w"> </span>mpv<span class="w"> </span>screen<span class="w"> </span>-y<span class="w">   </span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="gp"># </span>apt<span class="w"> </span>-y<span class="w"> </span>autoremove
</span></code></pre></div>
<h3 id="google-chrome">Google Chrome</h3>
<p>Installing <a href="https://google.com/chrome">Google Chrome</a> is as
simple as downloading the Debian package and installing it:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="gp"># </span>dpkg<span class="w"> </span>-i<span class="w"> </span>google-chrome-stable_current_amd64.deb<span class="w"> </span>
</span></code></pre></div>
<h3 id="steam">Steam</h3>
<p>Installing the Steam client requires first installing several
<code>i386</code> (32-bit) libraries:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>libgl1-mesa-glx:i386<span class="w"> </span>libc6:amd64<span class="w"> </span>libc6:i386<span class="w"> </span>libegl1:amd64<span class="w"> </span>libegl1:i386<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span>libgbm1:amd64<span class="w"> </span>libgbm1:i386<span class="w"> </span>libgl1-mesa-dri:amd64<span class="w"> </span>libgl1-mesa-dri:i386<span class="w"> </span>libgl1:amd64<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span>libgl1:i386<span class="w"> </span>steam-libs-amd64:amd64<span class="w"> </span>steam-libs-i386:i386<span class="w"> </span>-y
</span></code></pre></div>
<p>With those installed, one can download <code>steam_latest.deb</code> from
<a href="https://store.steampowered.com/about/">store.steampowered.com/about</a>
and install it with <code>gdebi</code>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="gp"># </span>gdebi<span class="w"> </span>steam_latest.deb
</span></code></pre></div>
<h3 id="minecraft">Minecraft</h3>
<p>The <a href="https://launcher.mojang.com/mc-staging/download/Minecraft_staging.deb"><code>Minecraft_staging.deb</code> launcher</a>
no longer works, because it only allows trying to log in with
<strong>Mojang accounts</strong>, and those have been deprecated.</p>
<p>This was <em>very</em> unexpected, given how the
<a href="https://www.minecraft.net/en-us/download/alternative">Alternative Download Options for Minecraft: Java Edition</a>
still points to the old
<a href="https://launcher.mojang.com/download/Minecraft.deb"><code>Minecraft.deb</code></a>
and a recent article on how to
<a href="https://linuxhint.com/install-minecraft-ubuntu22-04/">Install Minecraft on Ubuntu 22.04</a>
still presents this option as viable.</p>
<p>The only method that proved successful to install Minecraft:
Java Edition was to copy <code>/usr/bin/minecraft-launcher</code> from
the previous system, from a backup in <strong>lexicon</strong>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="gp">lexicon:~/computer-backup$ </span>md5sum<span class="w"> </span><span class="se">\</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span>usr/bin/minecraft-launcher<span class="w"> </span><span class="se">\</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span>usr/share/applications/minecraft-launcher.desktop<span class="w"> </span><span class="se">\</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span>usr/share/icons/hicolor/symbolic/apps/minecraft-launcher.svg
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="go">5d0a29a858de070384fcbe84540fcdc9  usr/bin/minecraft-launcher</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="go">af82416995d92945ad5e6a24ac23f503  usr/share/applications/minecraft-launcher.desktop</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="go">1afb79bae5991dfdd73d15a3e2bbd731  usr/share/icons/hicolor/symbolic/apps/minecraft-launcher.svg</span>
</span></code></pre></div>
<p>With this, plus personal files, Minecraft should be playable.
To test this (and everything else) before moving the 120 GB SSD to Computer, copy most of <code>/home/artist</code> (except Steam games) to <strong>Rapture</strong> and mount its <code>/home</code> partition:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="gp"># </span>Rapture<span class="w"> </span>/home<span class="w"> </span>is<span class="w"> </span>on<span class="w"> </span>/dev/nvme0n1p5
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="go">UUID=18238846-d411-4dcb-af87-a2d19a17fef3 /home btrfs   defaults 0 2</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="gp"># </span>Computer<span class="w"> </span>/home<span class="w"> </span>is<span class="w"> </span>on<span class="w"> </span>/dev/sdc2
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="gp">#</span><span class="nv">UUID</span><span class="o">=</span>3accdc44-232e-4924-a99f-019427900938<span class="w"> </span>/home<span class="w"> </span>btrfs<span class="w">   </span>defaults<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
</span></code></pre></div>
<h3 id="continuous-monitoring">Continuous Monitoring</h3>
<p>To have <a href="../../../../2020/03/31/detailed-system-and-process-monitoring/">detailed system and process monitoring</a>, install the <strong><code>conmon-mt</code></strong> (multi-thread) script from
<a href="../../../../../conmon/"><strong>Continuous Monitoring</strong></a>.</p>
<p>Once it's running, go to Grafana and save a copy of the
<strong>Rapture</strong> dashboard as <strong>New Computer</strong>, then update all the
queries to filter for <code>hostname = computer</code>.</p>
<h2 id="system-configuration">System Configuration</h2>
<p>Once software is installed, further system configuration is
desired to make some of it work better for certain purposes.</p>
<h3 id="logitech-trackman-marble">Logitech Trackman Marble</h3>
<p>To enable 2-axis scrolling with the
<a href="https://www.trackballmouse.org/logitech-trackman-marble/">Logitech Trackman Marble</a>
create or edit <code>/usr/share/X11/xorg.conf.d/10-libinput.conf</code>
like this:</p>
<div class="language-xorg.conf highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/usr/share/X11/xorg.conf.d/10-libinput.conf</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="se">Section</span> <span class="se">"InputClass"</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span class="nb">Identifier</span>      <span class="no">"Marble Mouse"</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a>    <span class="nb">MatchProduct</span>    <span class="no">"Logitech USB Trackball"</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a>    <span class="nb">MatchIsPointer</span>  <span class="no">"on"</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="nb">MatchDevicePath</span> <span class="no">"/dev/input/event*"</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a>    <span class="nb">Driver</span>          <span class="no">"libinput"</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a>    <span class="nb">Option</span>          <span class="no">"SendCoreEvents" "true"</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a>    <span class="c">#  Physical buttons come from the mouse as:</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a>    <span class="c">#     Big:   1 3</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a>    <span class="c">#     Small: 8 9</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a>    <span class="c">#</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13"></a>    <span class="c"># This makes right small button (9) into the middle, and puts</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14"></a>    <span class="c">#  scrolling on the left small button (8).</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15"></a>    <span class="c">#</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16"></a>    <span class="nb">Option</span> <span class="no">"Buttons"            "9"</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17"></a>    <span class="nb">Option</span> <span class="no">"ButtonMapping"      "1 8 3 4 5 6 7 9 2"</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18"></a>    <span class="nb">Option</span> <span class="no">"ScrollMethod"       "button"</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19"></a>    <span class="nb">Option</span> <span class="no">"ScrollButton"       "8"</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20"></a>    <span class="nb">Option</span> <span class="no">"EmulateWheel"       "true"</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21"></a>    <span class="nb">Option</span> <span class="no">"EmulateWheelButton" "8"</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22"></a>    <span class="nb">Option</span> <span class="no">"YAxisMapping"       "4 5"</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23"></a>    <span class="nb">Option</span> <span class="no">"XAxisMapping"       "6 7"</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="se">EndSection</span>
</span></code></pre></div></td></tr></table></div>
<p>On a <em>tangentially</em> related note, it is also good to
forbid joystick mouse emulation when using certain
joystick-like gaming controllers. To do this, 
create or edit <code>/usr/share/X11/xorg.conf.d/50-joystick.conf</code></p>
<div class="language-xorg.conf highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/usr/share/X11/xorg.conf.d/50-joystick.conf</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span>
<span class="normal"><a href="#__codelineno-14-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="se">Section</span> <span class="se">"InputClass"</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>    <span class="nb">Identifier</span> <span class="no">"joystick catchall"</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a>    <span class="nb">MatchIsJoystick</span> <span class="no">"on"</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a>    <span class="nb">MatchDevicePath</span> <span class="no">"/dev/input/event*"</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a>    <span class="nb">Driver</span> <span class="no">"joystick"</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a>    <span class="nb">Option</span> <span class="no">"StartKeysEnabled" "False"       </span><span class="c">#Disable mouse</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a>    <span class="nb">Option</span> <span class="no">"StartMouseEnabled" "False"      </span><span class="c">#support</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="se">EndSection</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="ssh-server">SSH Server</h3>
<p>Ubuntu Studio being a <em>desktop</em> distro, doesn't enable the
SSH server by default, but this is very useful to adjust the
system remotely at any time:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>ssh<span class="w"> </span>-y
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="gp"># </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">'s/#PermitRootLogin prohibit-password/PermitRootLogin yes/'</span><span class="w"> </span>/etc/ssh/sshd_config
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="gp"># </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>ssh
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember to copy over files under <code>/root</code> from previous system/s, in case
it contains useful scripts (and/or SSH keys worth keeping under <code>.ssh</code>).</p>
</div>
<h3 id="multiple-ips-on-lan">Multiple IPs on LAN</h3>
<p>Connecting via Ethernet we get a DHCP lease in the same network used by the WiFi 
(<code>192.168.0.0/24</code>). To add a static IP address isolated from WiFi, set it up like this:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="gp"># </span>ip<span class="w"> </span>a
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="go">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="go">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="go">    inet 127.0.0.1/8 scope host lo</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="go">    inet6 ::1/128 scope host </span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="go">2: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="go">    link/ether 60:45:cb:a0:16:7b brd ff:ff:ff:ff:ff:ff</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="go">    inet 192.168.0.31/24 brd 192.168.0.255 scope global dynamic noprefixroute enp8s0</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="go">       valid_lft 80045sec preferred_lft 80045sec</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="go">    inet6 fe80::495e:55c0:ed37:9a21/64 scope link noprefixroute </span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="go">3: enx70b5e8f62f4d: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="go">    link/ether 70:b5:e8:f6:2f:4d brd ff:ff:ff:ff:ff:ff</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="go">4: wlp6s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="go">    link/ether a0:f3:c1:1d:71:b0 brd ff:ff:ff:ff:ff:ff</span>
</span></code></pre></div>
<p>We only need to get the DNS add them with the 2nd IP:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gp"># </span>resolvectl<span class="w"> </span>status
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="go">Global</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="go">       Protocols: -LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="go">resolv.conf mode: stub</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="go">Link 2 (enp8s0)</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="go">    Current Scopes: DNS</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="go">         Protocols: +DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="go">Current DNS Server: 62.2.24.158</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="go">       DNS Servers: 62.2.24.158 62.2.17.61</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="go">        DNS Domain: v.cablecom.net</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="go">Link 3 (enx70b5e8f62f4d)</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="go">Current Scopes: none</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="go">     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="go">Link 4 (wlp6s0)</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="go">Current Scopes: none</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="go">     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Additional DNS Servers found by the previous system:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>62.2.17.60
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>62.2.17.61
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>62.2.24.158
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>62.2.24.162
</span></code></pre></div>
</div>
<p>With these, we can go back to static IPs and simply add both addresses together:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/etc/netplan/01-network-manager-all.yaml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1"># Dual static IP on LAN, nothing else.</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="nt">network</span><span class="p">:</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">  </span><span class="nt">renderer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networkd</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">  </span><span class="nt">ethernets</span><span class="p">:</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">    </span><span class="nt">enp8s0</span><span class="p">:</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">      </span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">      </span><span class="nt">dhcp6</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">      </span><span class="c1"># Ser IP address &amp; subnet mask</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">      </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">10.0.0.3/24</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">192.168.0.3/24</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">      </span><span class="c1"># Set default gateway</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">      </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">         </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.1</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">      </span><span class="nt">nameservers</span><span class="p">:</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">        </span><span class="c1"># Set DNS name servers</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">        </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">62.2.24.158</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">62.2.17.61</span><span class="p p-Indicator">]</span>
</span></code></pre></div></td></tr></table></div>
<p>Apply the changes with netplan apply ─ there may be a warning, but it works:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="gp"># </span>netplan<span class="w"> </span>apply
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="gp"># </span>ip<span class="w"> </span>a
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="go">…</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="go">2: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="go">    link/ether 60:45:cb:a0:16:7b brd ff:ff:ff:ff:ff:ff</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="go">    inet 10.0.0.2/24 brd 10.0.0.255 scope global enp8s0</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="go">    inet 192.168.0.9/24 brd 192.168.0.255 scope global enp8s0</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="go">    inet6 fe80::495e:55c0:ed37:9a21/64 scope link noprefixroute </span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="go">       valid_lft forever preferred_lft forever</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="go">…</span>
</span></code></pre></div>
<h4 id="wake-on-lan">Wake-on-LAN</h4>
<p>First, confirm Wake up on PCI event is enabled in the BIOS,
<a href="https://help.ubuntu.com/community/WakeOnLan#Enabling_WoL_in_the_BIOS">then enable it in the NIC</a>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>ethtool<span class="w"> </span>-y
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="gp"># </span>ethtool<span class="w"> </span>-s<span class="w"> </span>enp8s0<span class="w"> </span>wol<span class="w"> </span>g
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="gp"># </span>ethtool<span class="w"> </span>enp8s0<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>wake
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="go">        Supports Wake-on: pumbg</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="go">        Wake-on: g</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Issuing this command is required after each boot.
The system's networking is configured via netplan, so we need
to add the <code>ethtool -s &lt;NIC&gt; wol g</code> command to a script
under <code>/etc/networkd-dispatcher/configure.d/</code>, e.g.
<code>50-enable-wol</code></p>
</div>
<div class="language-bash highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/etc/networkd-dispatcher/configure.d/50-enable-wol</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="ch">#!/bin/sh</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$IFACE</span><span class="s2">"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enp8s0"</span><span class="w"> </span><span class="o">]</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="k">then</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">  </span>/usr/sbin/ethtool<span class="w"> </span>-s<span class="w"> </span><span class="nv">$IFACE</span><span class="w"> </span>wol<span class="w"> </span>g
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="k">fi</span>
</span></code></pre></div></td></tr></table></div>
<p>Now the wake-on-LAN remains enabled in the NIC even after
shutdown. This is a bit futile because the PC is plugged to a
power extension that gets turned off overnight and even
during the day, and when power is cut off from the PSU the
WOL setting is lost.</p>
<h3 id="make-sddm-look-good">Make SDDM Look Good</h3>
<p>Ubuntu Studio 22.04 uses 
<a href="https://wiki.archlinux.org/title/SDDM">Simple Desktop Display Manager (SDDM)</a>
(<a href="https://github.com/sddm/sddm">sddm/sddm</a> in GitHub)
which is quite good looking out of the box, but I like to
customize this for each computer.</p>
<p>For most computers my favorite SDDM theme is
<a href="https://store.kde.org/p/1361460">Breeze-Noir-Dark</a>,
which I like to install system-wide:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="gp"># </span>unzip<span class="w"> </span>Breeze-Noir-Dark.zip
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="gp"># </span>mv<span class="w"> </span>Breeze-Noir-Dark<span class="w"> </span>/usr/share/sddm/themes/breeze-noir-dark
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Action icons won’t render due to the different
directory name, need to change the directory name in the
<code>iconSource</code> fields in <code>Main.qml</code> to make them all lowercase
so icons show up.</p>
</div>
<p>Other than installing this theme, all I really change in it
is the background image, e.g. assuming it's downloaded as
<code>/tmp/background.jpg</code></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="gp"># </span>mv<span class="w"> </span>/tmp/background.jpg<span class="w"> </span>/usr/share/sddm/themes/breeze-noir-dark
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="gp"># </span>mv<span class="w"> </span>/tmp/ponyo.jpg<span class="w"> </span>/usr/share/sddm/themes/breeze-noir-dark
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="gp"># </span><span class="nb">cd</span><span class="w"> </span>/usr/share/sddm/themes/breeze-noir-dark
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="gp"># </span>vi<span class="w"> </span>theme.conf
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="go">background=/usr/share/sddm/themes/breeze-noir-dark/background.jpg</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="gp"># </span>vi<span class="w"> </span>theme.conf.user
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="go">background=background.jpg</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It appears that this only works when the background image is specified
in <code>theme.conf.user</code> and is stored in the theme’s directory.</p>
</div>
<h4 id="make-sddm-listen-to-tcp">Make SDDM Listen to TCP</h4>
<p>By default, SDDM launches X.org with <code>-nolisten tcp</code> for
security reasons. To override this, set the flag under the
<code>[X11]</code> section in <code>/etc/sddm.conf.d/kde_settings.conf</code></p>
<div class="language-ini highlight"><span class="filename">/etc/sddm.conf.d/kde_settings.conf</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">[X11]</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="na">ServerArguments</span><span class="o">=</span><span class="s">-listen tcp</span>
</span></code></pre></div>
<p>Then add a short script to authorize connections from <code>localhost</code> to the user (<code>artist</code>) <strong>session</strong>, e.g. as
<code>~/bin/xhost-localhost</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>xhost<span class="w"> </span>+localhost
</span></code></pre></div>
<p>This allows an SSH session for the user (<code>artist</code>) to send messages to the screen with <code>zenity</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nv">DISPLAY</span><span class="o">=</span>localhost:0<span class="w"> </span>/usr/bin/zenity<span class="w"> </span>--warning<span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">  </span>--text<span class="o">=</span><span class="s1">'Computer Will Shut Down in 20 Minutes'</span>
</span></code></pre></div>
<h2 id="user-specific-settings">User-specific Settings</h2>
<p>Once the system is <em>generally ready</em>, a <strong>Personal Computer</strong>
naturally requires additional settings <em>and</em> software specific
to the user/s who will use it the most.</p>
<h3 id="redshift">RedShift</h3>
<p><a href="http://jonls.dk/redshift/">Redshift</a>
adjusts the color temperature of your screen according to
your surroundings. This may help your eyes hurt less if you
are working in front of the screen at night.</p>
<p>More importantly,
<a href="https://www.health.harvard.edu/staying-healthy/blue-light-has-a-dark-side">blue light can affect your sleep</a>, because
<a href="https://health.ucdavis.edu/blog/cultivating-health/blue-light-effects-on-your-eyes-sleep-and-health/2022/08">exposure to blue light before bedtime can disrupt sleep</a>
patterns as it affects when our bodies create melatonin.</p>
<p>This is why <code>redshift-gtk</code> was already installed as part of
the first <a href="#apt-packages">APT packages</a>. What is left to do
for a full customization is to adjust the color temperature
values and manual location in <code>~/.config/redshift.conf</code></p>
<div class="language-ini highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">~/.config/redshift.conf</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">[redshift]</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="na">temp-day</span><span class="o">=</span><span class="s">5500</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="na">temp-night</span><span class="o">=</span><span class="s">4500</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="na">gamma</span><span class="o">=</span><span class="s">0.6</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="na">adjustment-method</span><span class="o">=</span><span class="s">randr</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="na">location-provider</span><span class="o">=</span><span class="s">manual</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="k">[manual]</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="na">lat</span><span class="o">=</span><span class="s">47</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="na">lon</span><span class="o">=</span><span class="s">0</span>
</span></code></pre></div></td></tr></table></div>
<p>RedShift can be temporarily disabled and/or reset to the
default values (based on the config above) by activating the
Redshift Control Widget. Usually this is done by clicking on
it, but it can be done through a keyboard shortcut as well
which is very useful while playing video games.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Adding the Redshift Control Widget to a KDE
Plasma panel runs a risk of scrolling the mouse wheel on it
and making the screen so dark it becomes unusuable. In case
this happens, it is highly recommended to add a keyboard
shortcut as follows.</p>
</div>
<p>My personal choice of shortcut to
<strong>Activate Redshift Control Widget</strong> is
<strong><code>Ctrl+Alt+Shift+R</code></strong>.</p>
<p><a class="glightbox" href="../../../../media/2022-11-12-ubuntu-studio-22-04-on-computer-for-a-young-artist/redshift-shortcut.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Shorcuts setting for Activate Redshift Control Widget" src="../../../../media/2022-11-12-ubuntu-studio-22-04-on-computer-for-a-young-artist/redshift-shortcut.png"></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It seems no longer necessary to manually add
Redshift to the user's desktop session. Previously, it would
be necessary to launch <strong>Autostart</strong> and <strong>Add Application…</strong> to add Redshift.</p>
</div>
<h3 id="wacom-tablet">Wacom tablet</h3>
<p>This young artist enjoys digital painting on Krita and even
3D sculpting on Blender, using a Wacom graphic tablet with a
few buttons mapped to the Undo/Redo and Zoom In/out functions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This setup is specific to the
<a href="https://www.wacom.com/en-gb/products/pen-tablets/wacom-intuos">Wacom Intuos Art Pen &amp; Touch M South</a>.</p>
</div>
<p>To make Krita work best with this, we use a Python script
to listen for the Wacom tablet, so that when it is plugged in
the button mapping is loaded and then Krita is launched.</p>
<p>This script depends on
<a href="https://pyudev.readthedocs.io/en/latest/">pyudev</a>
and
<a href="https://docs.python.org/3/library/idle.html">idle</a>
for Python 3:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>python3-pyudev<span class="w"> </span>idle-python3.10<span class="w"> </span>-y
</span></code></pre></div>
<p>The script <code>wait-for-wacom-and-launch-krita.py</code> launches
Krita right after setting the tablet up, and supports
both 16:9 and non-16:9 screens (e.g. 3440x1440):</p>
<details class="code">
<summary><code>wait-for-wacom-and-launch-krita.py</code></summary>
<div class="language-py highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span>
<span class="normal"><a href="#__codelineno-30-23">23</a></span>
<span class="normal"><a href="#__codelineno-30-24">24</a></span>
<span class="normal"><a href="#__codelineno-30-25">25</a></span>
<span class="normal"><a href="#__codelineno-30-26">26</a></span>
<span class="normal"><a href="#__codelineno-30-27">27</a></span>
<span class="normal"><a href="#__codelineno-30-28">28</a></span>
<span class="normal"><a href="#__codelineno-30-29">29</a></span>
<span class="normal"><a href="#__codelineno-30-30">30</a></span>
<span class="normal"><a href="#__codelineno-30-31">31</a></span>
<span class="normal"><a href="#__codelineno-30-32">32</a></span>
<span class="normal"><a href="#__codelineno-30-33">33</a></span>
<span class="normal"><a href="#__codelineno-30-34">34</a></span>
<span class="normal"><a href="#__codelineno-30-35">35</a></span>
<span class="normal"><a href="#__codelineno-30-36">36</a></span>
<span class="normal"><a href="#__codelineno-30-37">37</a></span>
<span class="normal"><a href="#__codelineno-30-38">38</a></span>
<span class="normal"><a href="#__codelineno-30-39">39</a></span>
<span class="normal"><a href="#__codelineno-30-40">40</a></span>
<span class="normal"><a href="#__codelineno-30-41">41</a></span>
<span class="normal"><a href="#__codelineno-30-42">42</a></span>
<span class="normal"><a href="#__codelineno-30-43">43</a></span>
<span class="normal"><a href="#__codelineno-30-44">44</a></span>
<span class="normal"><a href="#__codelineno-30-45">45</a></span>
<span class="normal"><a href="#__codelineno-30-46">46</a></span>
<span class="normal"><a href="#__codelineno-30-47">47</a></span>
<span class="normal"><a href="#__codelineno-30-48">48</a></span>
<span class="normal"><a href="#__codelineno-30-49">49</a></span>
<span class="normal"><a href="#__codelineno-30-50">50</a></span>
<span class="normal"><a href="#__codelineno-30-51">51</a></span>
<span class="normal"><a href="#__codelineno-30-52">52</a></span>
<span class="normal"><a href="#__codelineno-30-53">53</a></span>
<span class="normal"><a href="#__codelineno-30-54">54</a></span>
<span class="normal"><a href="#__codelineno-30-55">55</a></span>
<span class="normal"><a href="#__codelineno-30-56">56</a></span>
<span class="normal"><a href="#__codelineno-30-57">57</a></span>
<span class="normal"><a href="#__codelineno-30-58">58</a></span>
<span class="normal"><a href="#__codelineno-30-59">59</a></span>
<span class="normal"><a href="#__codelineno-30-60">60</a></span>
<span class="normal"><a href="#__codelineno-30-61">61</a></span>
<span class="normal"><a href="#__codelineno-30-62">62</a></span>
<span class="normal"><a href="#__codelineno-30-63">63</a></span>
<span class="normal"><a href="#__codelineno-30-64">64</a></span>
<span class="normal"><a href="#__codelineno-30-65">65</a></span>
<span class="normal"><a href="#__codelineno-30-66">66</a></span>
<span class="normal"><a href="#__codelineno-30-67">67</a></span>
<span class="normal"><a href="#__codelineno-30-68">68</a></span>
<span class="normal"><a href="#__codelineno-30-69">69</a></span>
<span class="normal"><a href="#__codelineno-30-70">70</a></span>
<span class="normal"><a href="#__codelineno-30-71">71</a></span>
<span class="normal"><a href="#__codelineno-30-72">72</a></span>
<span class="normal"><a href="#__codelineno-30-73">73</a></span>
<span class="normal"><a href="#__codelineno-30-74">74</a></span>
<span class="normal"><a href="#__codelineno-30-75">75</a></span>
<span class="normal"><a href="#__codelineno-30-76">76</a></span>
<span class="normal"><a href="#__codelineno-30-77">77</a></span>
<span class="normal"><a href="#__codelineno-30-78">78</a></span>
<span class="normal"><a href="#__codelineno-30-79">79</a></span>
<span class="normal"><a href="#__codelineno-30-80">80</a></span>
<span class="normal"><a href="#__codelineno-30-81">81</a></span>
<span class="normal"><a href="#__codelineno-30-82">82</a></span>
<span class="normal"><a href="#__codelineno-30-83">83</a></span>
<span class="normal"><a href="#__codelineno-30-84">84</a></span>
<span class="normal"><a href="#__codelineno-30-85">85</a></span>
<span class="normal"><a href="#__codelineno-30-86">86</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="ch">#!/usr/bin/python3</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="c1">#</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="c1"># Wait for a (specific) Wacom Intous table and map its 4 buttons to: undo, redo, zoom in/out.</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="c1"># Exit (successfully or not) after mapping the buttons.</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="kn">import</span> <span class="nn">gi</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="kn">import</span> <span class="nn">pyudev</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="kn">import</span> <span class="nn">socket</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11"></a>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="n">EXPECTED_ID_SERIAL</span> <span class="o">=</span> <span class="s1">'Wacom_Co._Ltd._Intuos_PTM'</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="n">XSETWACOM_CMD</span> <span class="o">=</span> <span class="s1">'/usr/bin/xsetwacom'</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="n">XSETWACOM_PAD_DEV</span> <span class="o">=</span> <span class="s1">'Wacom Intuos PT M 2 Pad pad'</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="n">XSETWACOM_STL_DEV</span> <span class="o">=</span> <span class="s1">'Wacom Intuos PT M 2 Pen stylus'</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="n">XSETWACOM_MAP</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="n">XSETWACOM_MAP</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'key ctrl z'</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="n">XSETWACOM_MAP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'key ctrl shift z'</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="n">XSETWACOM_MAP</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'key +'</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20"></a><span class="n">XSETWACOM_MAP</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'key -'</span>
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21"></a>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="n">HOST_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23"></a>  <span class="s1">'computer'</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24"></a>    <span class="s1">'krita-cmd'</span><span class="p">:</span> <span class="s1">'/home/artist/Desktop/.bin/krita'</span><span class="p">,</span>
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25"></a>  <span class="p">},</span>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26"></a>  <span class="s1">'rapture'</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27"></a>    <span class="s1">'krita-cmd'</span><span class="p">:</span> <span class="s1">'/home/ponder/bin/krita-es'</span><span class="p">,</span>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28"></a>    <span class="c1"># Adjust drawing area in 3440x1440 screen with</span>
</span><span id="__span-30-29"><a id="__codelineno-30-29" name="__codelineno-30-29"></a>    <span class="c1"># xsetwacom --set "Wacom Intuos PT M 2 Pen stylus" Area </span>
</span><span id="__span-30-30"><a id="__codelineno-30-30" name="__codelineno-30-30"></a>    <span class="s1">'stylus-area'</span><span class="p">:</span> <span class="s1">'0 0 21600 9042'</span><span class="p">,</span>
</span><span id="__span-30-31"><a id="__codelineno-30-31" name="__codelineno-30-31"></a>  <span class="p">},</span>
</span><span id="__span-30-32"><a id="__codelineno-30-32" name="__codelineno-30-32"></a><span class="p">}</span>
</span><span id="__span-30-33"><a id="__codelineno-30-33" name="__codelineno-30-33"></a>
</span><span id="__span-30-34"><a id="__codelineno-30-34" name="__codelineno-30-34"></a><span class="k">def</span> <span class="nf">device_event</span><span class="p">(</span><span class="n">device</span><span class="p">):</span>
</span><span id="__span-30-35"><a id="__codelineno-30-35" name="__codelineno-30-35"></a>    <span class="n">id_serial</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ID_SERIAL'</span><span class="p">)</span>
</span><span id="__span-30-36"><a id="__codelineno-30-36" name="__codelineno-30-36"></a>    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">'bind'</span> <span class="ow">and</span> <span class="n">id_serial</span> <span class="o">==</span> <span class="n">EXPECTED_ID_SERIAL</span><span class="p">:</span>
</span><span id="__span-30-37"><a id="__codelineno-30-37" name="__codelineno-30-37"></a>      <span class="n">total_status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-30-38"><a id="__codelineno-30-38" name="__codelineno-30-38"></a>      <span class="n">hostname</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>
</span><span id="__span-30-39"><a id="__codelineno-30-39" name="__codelineno-30-39"></a>      <span class="n">config</span> <span class="o">=</span> <span class="n">HOST_CONFIG</span><span class="p">[</span><span class="n">hostname</span><span class="p">]</span>
</span><span id="__span-30-40"><a id="__codelineno-30-40" name="__codelineno-30-40"></a>      <span class="c1"># Map PAD buttons.</span>
</span><span id="__span-30-41"><a id="__codelineno-30-41" name="__codelineno-30-41"></a>      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
</span><span id="__span-30-42"><a id="__codelineno-30-42" name="__codelineno-30-42"></a>        <span class="n">xsetwacom_command</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-30-43"><a id="__codelineno-30-43" name="__codelineno-30-43"></a>            <span class="n">XSETWACOM_CMD</span><span class="p">,</span> <span class="s1">'set'</span><span class="p">,</span> <span class="n">XSETWACOM_PAD_DEV</span><span class="p">,</span> 
</span><span id="__span-30-44"><a id="__codelineno-30-44" name="__codelineno-30-44"></a>            <span class="s1">'Button'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">XSETWACOM_MAP</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="__span-30-45"><a id="__codelineno-30-45" name="__codelineno-30-45"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">xsetwacom_command</span><span class="p">)</span>
</span><span id="__span-30-46"><a id="__codelineno-30-46" name="__codelineno-30-46"></a>        <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">xsetwacom_command</span><span class="p">)</span>
</span><span id="__span-30-47"><a id="__codelineno-30-47" name="__codelineno-30-47"></a>        <span class="n">total_status</span> <span class="o">+=</span> <span class="n">status</span>
</span><span id="__span-30-48"><a id="__codelineno-30-48" name="__codelineno-30-48"></a>      <span class="c1"># If necessary, assign stylus area in non-16:9 screen.</span>
</span><span id="__span-30-49"><a id="__codelineno-30-49" name="__codelineno-30-49"></a>      <span class="k">if</span> <span class="s1">'stylus-area'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
</span><span id="__span-30-50"><a id="__codelineno-30-50" name="__codelineno-30-50"></a>        <span class="n">xsetwacom_command</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-30-51"><a id="__codelineno-30-51" name="__codelineno-30-51"></a>            <span class="n">XSETWACOM_CMD</span><span class="p">,</span> <span class="s1">'set'</span><span class="p">,</span> <span class="n">XSETWACOM_STL_DEV</span><span class="p">,</span>
</span><span id="__span-30-52"><a id="__codelineno-30-52" name="__codelineno-30-52"></a>            <span class="s1">'Area'</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">'stylus-area'</span><span class="p">]]</span>
</span><span id="__span-30-53"><a id="__codelineno-30-53" name="__codelineno-30-53"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">xsetwacom_command</span><span class="p">)</span>
</span><span id="__span-30-54"><a id="__codelineno-30-54" name="__codelineno-30-54"></a>        <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">xsetwacom_command</span><span class="p">)</span>
</span><span id="__span-30-55"><a id="__codelineno-30-55" name="__codelineno-30-55"></a>        <span class="n">total_status</span> <span class="o">+=</span> <span class="n">status</span>
</span><span id="__span-30-56"><a id="__codelineno-30-56" name="__codelineno-30-56"></a>      <span class="k">if</span> <span class="n">total_status</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-30-57"><a id="__codelineno-30-57" name="__codelineno-30-57"></a>        <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span>
</span><span id="__span-30-58"><a id="__codelineno-30-58" name="__codelineno-30-58"></a>            <span class="s1">'/usr/bin/zenity'</span><span class="p">,</span>
</span><span id="__span-30-59"><a id="__codelineno-30-59" name="__codelineno-30-59"></a>            <span class="s1">'--error'</span><span class="p">,</span>
</span><span id="__span-30-60"><a id="__codelineno-30-60" name="__codelineno-30-60"></a>            <span class="s1">'--text="Could not configure </span><span class="si">%s</span><span class="s1">"'</span> <span class="o">%</span> <span class="n">id_serial</span><span class="p">])</span>
</span><span id="__span-30-61"><a id="__codelineno-30-61" name="__codelineno-30-61"></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-30-62"><a id="__codelineno-30-62" name="__codelineno-30-62"></a>      <span class="k">else</span><span class="p">:</span>
</span><span id="__span-30-63"><a id="__codelineno-30-63" name="__codelineno-30-63"></a>        <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span>
</span><span id="__span-30-64"><a id="__codelineno-30-64" name="__codelineno-30-64"></a>            <span class="s1">'/usr/bin/zenity'</span><span class="p">,</span> 
</span><span id="__span-30-65"><a id="__codelineno-30-65" name="__codelineno-30-65"></a>            <span class="s1">'--info'</span><span class="p">,</span>
</span><span id="__span-30-66"><a id="__codelineno-30-66" name="__codelineno-30-66"></a>            <span class="s1">'--text="Configured </span><span class="si">%s</span><span class="s1">"'</span> <span class="o">%</span> <span class="n">id_serial</span><span class="p">])</span>
</span><span id="__span-30-67"><a id="__codelineno-30-67" name="__codelineno-30-67"></a>        <span class="n">krita_cmd</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'krita-cmd'</span><span class="p">]</span>
</span><span id="__span-30-68"><a id="__codelineno-30-68" name="__codelineno-30-68"></a>        <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">krita_cmd</span><span class="p">])</span>
</span><span id="__span-30-69"><a id="__codelineno-30-69" name="__codelineno-30-69"></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-30-70"><a id="__codelineno-30-70" name="__codelineno-30-70"></a>
</span><span id="__span-30-71"><a id="__codelineno-30-71" name="__codelineno-30-71"></a>
</span><span id="__span-30-72"><a id="__codelineno-30-72" name="__codelineno-30-72"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-30-73"><a id="__codelineno-30-73" name="__codelineno-30-73"></a>  <span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GLib</span>
</span><span id="__span-30-74"><a id="__codelineno-30-74" name="__codelineno-30-74"></a>
</span><span id="__span-30-75"><a id="__codelineno-30-75" name="__codelineno-30-75"></a>  <span class="n">context</span> <span class="o">=</span> <span class="n">pyudev</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
</span><span id="__span-30-76"><a id="__codelineno-30-76" name="__codelineno-30-76"></a>  <span class="n">monitor</span> <span class="o">=</span> <span class="n">pyudev</span><span class="o">.</span><span class="n">Monitor</span><span class="o">.</span><span class="n">from_netlink</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-30-77"><a id="__codelineno-30-77" name="__codelineno-30-77"></a>  <span class="n">monitor</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">subsystem</span><span class="o">=</span><span class="s1">'usb'</span><span class="p">)</span>
</span><span id="__span-30-78"><a id="__codelineno-30-78" name="__codelineno-30-78"></a>  <span class="n">observer</span> <span class="o">=</span> <span class="n">pyudev</span><span class="o">.</span><span class="n">MonitorObserver</span><span class="p">(</span><span class="n">monitor</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">device_event</span><span class="p">)</span>
</span><span id="__span-30-79"><a id="__codelineno-30-79" name="__codelineno-30-79"></a>  <span class="n">observer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-30-80"><a id="__codelineno-30-80" name="__codelineno-30-80"></a>
</span><span id="__span-30-81"><a id="__codelineno-30-81" name="__codelineno-30-81"></a>  <span class="n">status</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span>
</span><span id="__span-30-82"><a id="__codelineno-30-82" name="__codelineno-30-82"></a>      <span class="s1">'/usr/bin/zenity'</span><span class="p">,</span> 
</span><span id="__span-30-83"><a id="__codelineno-30-83" name="__codelineno-30-83"></a>      <span class="s1">'--warning'</span><span class="p">,</span>
</span><span id="__span-30-84"><a id="__codelineno-30-84" name="__codelineno-30-84"></a>      <span class="s1">'--text="Plug the tablet in to continue..."'</span><span class="p">])</span>
</span><span id="__span-30-85"><a id="__codelineno-30-85" name="__codelineno-30-85"></a>  <span class="n">loop</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</span><span id="__span-30-86"><a id="__codelineno-30-86" name="__codelineno-30-86"></a>  <span class="n">loop</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
</details>
<h3 id="scratch-30-in-chrome">Scratch 3.0 in Chrome</h3>
<p>This artist is also into visual programming with
<a href="https://scratch.mit.edu/">Scratch</a>.</p>
<p>Scratch 2.0 was infesible to run, it was based on defunct
technology (Flash) and itself deprecated in favor of
web-based Scratch 3.0 ─ much better!</p>
<p>However, Scratch 3.0 has a tendency to crash Google Chrome.
This can be worked around by 
<a href="https://helpdeskgeek.com/help-desk/how-to-fix-status_access_violation-errors-in-chrome-or-edge/">disabling Renderer Code Integrity</a>.
To make this easily accessible, this can be added in a
custom launcher (e.g. <code>~/Desktop/Scratch.desktop</code>):</p>
<div class="language-ini highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">~/Desktop/Scratch.desktop</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span>
<span class="normal"><a href="#__codelineno-31-6">6</a></span>
<span class="normal"><a href="#__codelineno-31-7">7</a></span>
<span class="normal"><a href="#__codelineno-31-8">8</a></span>
<span class="normal"><a href="#__codelineno-31-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">[Desktop Entry]</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="na">Name</span><span class="o">=</span><span class="s">Scratch 3.0</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="na">Comment</span><span class="o">=</span><span class="s">Scratch 3.0</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="na">Exec</span><span class="o">=</span><span class="s">/opt/google/chrome/chrome-kiosk --disable-features=RendererCodeIntegrity "https://scratch.mit.edu/projects/editor"</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="na">Icon</span><span class="o">=</span><span class="s">/home/artist/Desktop/.icons/scratch.png</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="na">Type</span><span class="o">=</span><span class="s">Application</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="na">Path</span><span class="o">=</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="na">Terminal</span><span class="o">=</span><span class="s">false</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="na">StartupNotify</span><span class="o">=</span><span class="s">false</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="roccat-tools">Roccat Tools</h3>
<p>This artist has a very peculiar mechanical keyboard:
Roccat <a href="https://support.roccat.com/s/article/ryos-mk-pro-faqs?language=en_US">Ryos MK Pro</a></p>
<p>This keyboard has 5 keys for macros, let’s see how to make use of them…</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>gcc<span class="w"> </span>cmake<span class="w"> </span>libdbus-glib-1-dev<span class="w"> </span>libgtk2.0-dev<span class="w"> </span>libgudev-1.0-dev<span class="w"> </span>libx11-dev<span class="w"> </span>libgaminggear-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">  </span>lua5.3-dev<span class="w"> </span>liblua5.3-dev<span class="w"> </span>luajit<span class="w"> </span>libluajit-5.1-dev<span class="w"> </span>libtexluajit-dev<span class="w"> </span>-y
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/roccat-linux/roccat-tools.git
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>roccat-tools/
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="gp">$ </span>mkdir<span class="w"> </span>build
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="gp">$ </span>cmake<span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">  </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="s2">"/usr"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">  </span>-DWITH_LUA<span class="o">=</span><span class="m">5</span>.3<span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">  </span>-isystem<span class="w"> </span>/usr/include/harfbuzz<span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">  </span>-DCMAKE_C_FLAGS<span class="o">=</span><span class="s2">"</span><span class="k">$(</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>harfbuzz<span class="k">)</span><span class="s2">"</span><span class="w"> </span>..
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="gp">$ </span>make
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="gp">$ </span>sudo<span class="w"> </span>make<span class="w"> </span>install
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="gp">$ </span>sudo<span class="w"> </span>scripts/post_install
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="gp">$ </span>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>roccat<span class="w"> </span>artist
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="gp">$ </span>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>roccat<span class="w"> </span>ponder
</span></code></pre></div>
<p>At this point we have to log out and back in, or reboot.</p>
<h2 id="parental-controls">Parental Controls</h2>
<h3 id="squid-proxy">Squid Proxy</h3>
<p>This system being setup for a <em>very</em> young artist, responsible
parenting demands that certain parts of the Wild Internet be,
if not entirely unreachable, at least time-gated.</p>
<p>Install Squid proxy and set it up for localhost only:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>squid<span class="w"> </span>-y
</span></code></pre></div>
<div class="language-squid highlight"><span class="filename">/etc/squid/squid.conf</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">acl</span><span class="w"> </span>localnet<span class="w"> </span><span class="k">src</span><span class="w"> </span><span class="mf">10.0.0.0/8</span><span class="w"> </span><span class="c"># RFC1918 possible internal network</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">acl</span><span class="w"> </span>SSL_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">443</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">80</span><span class="w">      </span><span class="c"># http</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">21</span><span class="w">      </span><span class="c"># ftp</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">443</span><span class="w">     </span><span class="c"># https</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">70</span><span class="w">      </span><span class="c"># gopher</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">210</span><span class="w">     </span><span class="c"># wais</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">1025-65535</span><span class="w">  </span><span class="c"># unregistered ports</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">280</span><span class="w">     </span><span class="c"># http-mgmt</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">488</span><span class="w">     </span><span class="c"># gss-http</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">591</span><span class="w">     </span><span class="c"># filemaker</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="k">acl</span><span class="w"> </span>Safe_ports<span class="w"> </span><span class="k">port</span><span class="w"> </span><span class="m">777</span><span class="w">     </span><span class="c"># multiling http</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="k">acl</span><span class="w"> </span>CONNECT<span class="w"> </span><span class="k">method</span><span class="w"> </span>CONNECT
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="k">http_access</span><span class="w"> </span><span class="no">deny</span><span class="w"> </span>!Safe_ports
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="k">http_access</span><span class="w"> </span><span class="no">deny</span><span class="w"> </span>CONNECT<span class="w"> </span>!SSL_ports
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="k">http_access</span><span class="w"> </span><span class="no">allow</span><span class="w"> </span>localhost<span class="w"> </span>manager
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="k">http_access</span><span class="w"> </span><span class="no">deny</span><span class="w"> </span>manager
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="k">http_access</span><span class="w"> </span><span class="no">allow</span><span class="w"> </span>localhost
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="k">http_access</span><span class="w"> </span><span class="no">deny</span><span class="w"> </span><span class="no">all</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="k">http_port</span><span class="w"> </span><span class="m">3128</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="k">coredump_dir</span><span class="w"> </span>/var/spool/squid
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="k">refresh_pattern</span><span class="w"> </span>^ftp:<span class="w">       </span><span class="m">1440</span><span class="w">    </span><span class="m">20%</span><span class="w"> </span><span class="m">10080</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="k">refresh_pattern</span><span class="w"> </span>^gopher:<span class="w">    </span><span class="m">1440</span><span class="w">    </span><span class="m">0%</span><span class="w">  </span><span class="m">1440</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="k">refresh_pattern</span><span class="w"> </span>-i<span class="w"> </span>(/cgi-bin/|\?)<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0%</span><span class="w">  </span><span class="m">0</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="k">refresh_pattern</span><span class="w"> </span>(Release|Packages(.gz)*)$<span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">20%</span><span class="w">     </span><span class="m">2880</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="k">refresh_pattern</span><span class="w"> </span>.<span class="w">       </span><span class="m">0</span><span class="w">   </span><span class="m">20%</span><span class="w"> </span><span class="m">4320</span>
</span></code></pre></div>
<div class="language-console highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="gp"># </span>systemctl<span class="w"> </span>restart<span class="w"> </span>squid.service
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>squid.service
</span></code></pre></div>
<h4 id="block-youtube">Block YouTube</h4>
<p>This section shows how to block YouTube because that is the
one site that contains most domains. The same setup can be
used to block simpler sites, and it is useful to have this
setup replicated for each site as needed.</p>
<p>To <em>block</em> the site, create a file with the rules in
<a href="https://wiki.squid-cache.org/ConfigExamples/Streams/YouTube">How to block YouTube Videos</a>,
updated here to reflect the latest YouTube embed URL pattern.
To <em>allow</em> the site, create a file with just a comment.</p>
<p>For each site to block/allow, create a dedicated directory:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="gp"># </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/squid/conf.d/youtube/
</span></code></pre></div>
<p>In this directory, create a file (e.g. <code>no-youtube.conf</code>) with
the necessary rules:</p>
<div class="language-apache highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="c"># Blocking YouTube Videos</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="c"># https://wiki.squid-cache.org/ConfigExamples/Streams/YouTube</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="c">## The videos come from several domains</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="nb">acl</span><span class="w"> </span>youtube_domains<span class="w"> </span>dstdomain<span class="w"> </span>.youtube.com<span class="w"> </span>.googlevideo.com<span class="w"> </span>.ytimg.com
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="c">## G* services authentication domain</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="nb">acl</span><span class="w"> </span>google_accounts<span class="w"> </span>dstdomain<span class="w"> </span>accounts.youtube.com
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="nb">http_access</span><span class="w"> </span>deny<span class="w"> </span>youtube_domains<span class="w"> </span>!google_accounts
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="c">## Block YT clips</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="nb">acl</span><span class="w"> </span>yt_clips<span class="w"> </span>url_regex<span class="w"> </span>.youtube\.com\<span class="sx">/embed</span>\/
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="nb">http_access</span><span class="w"> </span>deny<span class="w"> </span>yt_clips
</span></code></pre></div></td></tr></table></div>
<p>Create also a file (e.g. <code>yes-youtube.conf</code>) with just a
comment, this will simply not block anything:</p>
<div class="language-apache highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c"># No Blocking YouTube Videos</span>
</span></code></pre></div>
<p>In the main Squid config file, include what will be a symlink
to either of the above:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="gp"># </span><span class="nb">cd</span><span class="w"> </span>/etc/squid/conf.d/youtube/
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="gp"># </span>ln<span class="w"> </span>-s<span class="w"> </span>no-youtube.conf<span class="w"> </span>youtube.conf
</span></code></pre></div>
<p>Add an <code>include</code> rules at the end of <code>/etc/squid/squid.conf</code></p>
<div class="language-squid highlight"><span class="filename">/etc/squid/squid.conf</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c"># INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>include<span class="w"> </span>/etc/squid/conf.d/*.conf
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="c"># Blocking (or not) YouTube Videos</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>include<span class="w"> </span>/etc/squid/conf.d/youtube/youtube.conf
</span></code></pre></div>
<p>To quickly alternate between the two states, create two scripts:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/root/bin/youtube-disable</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a>ln<span class="w"> </span>-sf<span class="w"> </span>/etc/squid/no-youtube.conf<span class="w"> </span>/etc/squid/youtube.conf
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a>/usr/sbin/squid<span class="w"> </span>-k<span class="w"> </span>reconfigure
</span></code></pre></div></td></tr></table></div>
<div class="language-bash highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/root/bin/youtube-enable</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a>ln<span class="w"> </span>-sf<span class="w"> </span>/etc/squid/yes-youtube.conf<span class="w"> </span>/etc/squid/youtube.conf
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a>/usr/sbin/squid<span class="w"> </span>-k<span class="w"> </span>reconfigure
</span></code></pre></div></td></tr></table></div>
<h4 id="squid-analyzer">Squid Analyzer</h4>
<p><a href="https://squidanalyzer.darold.net/">Squid Analyzer</a>
is useful to get a sense of what parts of the Internet are
begin requested, whether allowed or blocked.</p>
<ol>
<li>
<p>Download from <a href="http://squidanalyzer.darold.net/download.html">squidanalyzer.darold.net</a></p>
</li>
<li>
<p>Unpack and apply changes in <a href="https://github.com/darold/squidanalyzer/commit/616d742eb700cfd2324845c57a4c7f6978aac2a8">commit 616d742</a></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="gp"># </span>tar<span class="w"> </span>xvfz<span class="w"> </span>squidanalyzer-6.6.tar.gz
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="gp"># </span><span class="nb">cd</span><span class="w"> </span>squidanalyzer-6.6/
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="gp"># </span><span class="nb">echo</span><span class="w"> </span><span class="m">9</span><span class="w"> </span>&gt;<span class="w"> </span>debian/compat
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="gp"># </span>vi<span class="w"> </span>debian/rules<span class="w"> </span>+7
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="go">override_dh_auto_configure:</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="go">    perl Makefile.PL \</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="go">        INSTALLDIRS=vendor \</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="go">        LOGFILE=/var/log/squid3/access.log \</span>
</span></code></pre></div>
</li>
<li>
<p>Build Debian and install package</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="gp"># </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>build-essential<span class="w"> </span>apache2-dev
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="gp"># </span>dpkg-buildpackage<span class="w"> </span>-us<span class="w"> </span>-uc
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="gp"># </span>dpkg<span class="w"> </span>-i<span class="w"> </span>../squidanalyzer_6.6-1_all.deb
</span></code></pre></div>
</li>
<li>
<p>Setup <code>crontab</code> as per 
    <a href="http://squidanalyzer.darold.net/install.html">squidanalyzer.darold.net</a></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="gp"># </span>crontab<span class="w"> </span>-e
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="go">00 20 * * * /usr/bin/squid-analyzer /var/log/squid/access.log</span>
</span></code></pre></div>
</li>
<li>
<p>Authorize other PCs to visit, by adding this to <code>squidanalyzer.conf</code></p>
<div class="language-apache highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/etc/apache2/conf-available/squidanalyzer.conf</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span>
<span class="normal"><a href="#__codelineno-46-6">6</a></span>
<span class="normal"><a href="#__codelineno-46-7">7</a></span>
<span class="normal"><a href="#__codelineno-46-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="nb">Alias</span><span class="w"> </span><span class="sx">/squidreport</span><span class="w"> </span><span class="sx">/var/lib/squidanalyzer</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/var/lib/squidanalyzer</span><span class="nt">&gt;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="w">    </span><span class="nb">Options</span><span class="w"> </span>-Indexes<span class="w"> </span>+FollowSymLinks<span class="w"> </span>+MultiViews
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">    </span><span class="nb">Order</span><span class="w"> </span>deny,allow
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">    </span><span class="nb">Allow</span><span class="w"> </span>from<span class="w"> </span><span class="m">10.0.0.1/8</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="nt">&lt;/Directory&gt;</span>
</span></code></pre></div></td></tr></table></div>
</li>
</ol>
<h3 id="kioskify-browsers">Kioskify browsers</h3>
<p>To keep the youngest using the above Proxy and also not going
astray by opening new tabs on arbitrary URLs, replace all web
browser binaries with scripts that launch them with specific
flags to</p>
<ul>
<li>enable Kiosk mode,</li>
<li>always start at a chosen URL, and</li>
<li>force traffic through the local Proxy.</li>
</ul>
<h4 id="google-chrome_1">Google Chrome</h4>
<p>This method to <em>kioskify</em> a browser consists of</p>
<ol>
<li>renaming the original browser binary,</li>
<li>replace it with a launcher script, and</li>
<li>ensure the process applies only to the original binary.</li>
</ol>
<p>To this effect, run
<code>/opt/google/chrome/kioskify-google-chrome</code>
every minute:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/opt/google/chrome/kioskify-google-chrome</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span>
<span class="normal"><a href="#__codelineno-47-16">16</a></span>
<span class="normal"><a href="#__codelineno-47-17">17</a></span>
<span class="normal"><a href="#__codelineno-47-18">18</a></span>
<span class="normal"><a href="#__codelineno-47-19">19</a></span>
<span class="normal"><a href="#__codelineno-47-20">20</a></span>
<span class="normal"><a href="#__codelineno-47-21">21</a></span>
<span class="normal"><a href="#__codelineno-47-22">22</a></span>
<span class="normal"><a href="#__codelineno-47-23">23</a></span>
<span class="normal"><a href="#__codelineno-47-24">24</a></span>
<span class="normal"><a href="#__codelineno-47-25">25</a></span>
<span class="normal"><a href="#__codelineno-47-26">26</a></span>
<span class="normal"><a href="#__codelineno-47-27">27</a></span>
<span class="normal"><a href="#__codelineno-47-28">28</a></span>
<span class="normal"><a href="#__codelineno-47-29">29</a></span>
<span class="normal"><a href="#__codelineno-47-30">30</a></span>
<span class="normal"><a href="#__codelineno-47-31">31</a></span>
<span class="normal"><a href="#__codelineno-47-32">32</a></span>
<span class="normal"><a href="#__codelineno-47-33">33</a></span>
<span class="normal"><a href="#__codelineno-47-34">34</a></span>
<span class="normal"><a href="#__codelineno-47-35">35</a></span>
<span class="normal"><a href="#__codelineno-47-36">36</a></span>
<span class="normal"><a href="#__codelineno-47-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="c1"># Works only on a specific installation path.</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="nb">cd</span><span class="w"> </span>/opt/google/chrome<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="c1"># Works only if the 'chrome' file is an ELF executable.</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a>file<span class="w"> </span>chrome<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-q<span class="w"> </span>ELF<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="c1"># Rename chrome as chrome-normal</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span>backup-chrome<span class="w"> </span><span class="o">]</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="k">then</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="w">  </span>cp<span class="w"> </span>-fv<span class="w"> </span>chrome<span class="w"> </span>backup-chrome
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13"></a><span class="k">fi</span>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14"></a>mv<span class="w"> </span>-fv<span class="w"> </span>chrome<span class="w"> </span>chrome-normal
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15"></a>
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="c1"># Create chrome-kiosk </span>
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17"></a><span class="o">(</span>cat<span class="w"> </span><span class="s">&lt;&lt; __EOF__</span>
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18"></a><span class="s">#!/bin/bash</span>
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19"></a><span class="s">exec /opt/google/chrome/chrome-normal \\</span>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20"></a><span class="s">  --kiosk \\</span>
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21"></a><span class="s">  --proxy-server="127.0.0.1:3128" \\</span>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22"></a><span class="s">  \$*</span>
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23"></a><span class="s">__EOF__</span>
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24"></a><span class="o">)</span>&gt;chrome-kiosk<span class="w"> </span>
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25"></a>chmod<span class="w"> </span>+x<span class="w"> </span>chrome-kiosk<span class="w"> </span>
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26"></a>
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27"></a>grep<span class="w"> </span>-v<span class="w"> </span>kiosk<span class="w"> </span>chrome-kiosk<span class="w"> </span>&gt;<span class="w"> </span>chrome-no-kiosk<span class="w"> </span>
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28"></a>chmod<span class="w"> </span>+x<span class="w"> </span>chrome-no-kiosk<span class="w"> </span>
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29"></a>
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30"></a><span class="c1"># Create chrome (sink to fixed URL)</span>
</span><span id="__span-47-31"><a id="__codelineno-47-31" name="__codelineno-47-31"></a><span class="o">(</span>cat<span class="w"> </span><span class="s">&lt;&lt; __EOF__</span>
</span><span id="__span-47-32"><a id="__codelineno-47-32" name="__codelineno-47-32"></a><span class="s">#!/bin/bash</span>
</span><span id="__span-47-33"><a id="__codelineno-47-33" name="__codelineno-47-33"></a><span class="s">exec /opt/google/chrome/chrome-kiosk https://www.anton.app/de</span>
</span><span id="__span-47-34"><a id="__codelineno-47-34" name="__codelineno-47-34"></a><span class="s">__EOF__</span>
</span><span id="__span-47-35"><a id="__codelineno-47-35" name="__codelineno-47-35"></a><span class="o">)</span>&gt;chrome
</span><span id="__span-47-36"><a id="__codelineno-47-36" name="__codelineno-47-36"></a>
</span><span id="__span-47-37"><a id="__codelineno-47-37" name="__codelineno-47-37"></a>chmod<span class="w"> </span>+x<span class="w"> </span>chrome
</span></code></pre></div></td></tr></table></div>
<p>This can be run every minute, to immediately kioskify
each new browser version as soon as it's installed:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="gp"># </span>chmod<span class="w"> </span>+x<span class="w"> </span>kioskify-google-chrome
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="gp"># </span>crontab<span class="w"> </span>-e
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="go">* * * * * /opt/google/chrome/kioskify-google-chrome</span>
</span></code></pre></div>
<h3 id="crontab-playtime">Crontab Playtime</h3>
<div class="language-console highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="gp">$ </span>crontab<span class="w"> </span>-l
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="gp"># </span>m<span class="w"> </span>h<span class="w">  </span>dom<span class="w"> </span>mon<span class="w"> </span>dow<span class="w">   </span><span class="nb">command</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="go">* 12 * * 6,7 /home/artist/Desktop/.bin/restore .edu .fun</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="go">* 18 * * 1,2,3,4,5 /home/artist/Desktop/.bin/restore .edu .fun</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="go">00 20 * * * /home/artist/Desktop/.bin/restore</span>
</span></code></pre></div>
<h3 id="crontab-bedtime">Crontab Bedtime</h3>
<p>Everybody has a natural tendency to stay in front of their
computer, or other entertaining devices, for longer than is
good for them. This can be very detrimental when it impacts
sleep pattners, to avoid this this computer will shut down
on a regular schedule:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="gp"># </span>crontab<span class="w"> </span>-l<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s1">'shut.*down'</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="gp"># </span>Shut<span class="w"> </span>down<span class="w"> </span>at<span class="w"> </span><span class="m">20</span>:30<span class="w"> </span><span class="o">(</span>Sun-Thu<span class="o">)</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="go">00 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in thirty minutes"</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="go">10 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in twenty minutes"</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="go">15 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in fifteen minutes"</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="go">20 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in ten minutes"</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="go">25 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in five minutes"</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="go">26 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in four minutes"</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="go">27 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in three minutes"</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="go">28 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in two minutes"</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="go">29 20 * * 0-4 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn final warning _comma computer will shut down in sixty seconds"</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="go">30 20 * * 0-4 /sbin/shutdown -h now</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="gp"># </span>Shut<span class="w"> </span>down<span class="w"> </span>at<span class="w"> </span><span class="m">21</span>:30<span class="w"> </span><span class="o">(</span>Fri-Sat<span class="o">)</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a><span class="go">30 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in thirty minutes"</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a><span class="go">40 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in twenty minutes"</span>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a><span class="go">45 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in fifteen minutes"</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="go">50 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in ten minutes"</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a><span class="go">55 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in five minutes"</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="go">56 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in four minutes"</span>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="go">57 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in three minutes"</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a><span class="go">58 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn warning _comma computer will shut down in two minutes"</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="go">59 20 * * 5-6 ssh pi@pi-f1 "bin/half-life-vox-say buzwarn final warning _comma computer will shut down in sixty seconds"</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="go">00 21 * * 5-6 /sbin/shutdown -h now</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The audible warnings are played on the <strong>Raspberry Pi 4</strong> so
that they will play even if no user is logged in.</p>
</div>
<h3 id="time-tracking">Time Tracking</h3>
<p>Keep track of <em>where your times goes</em> is an on-going struggle
for everybody using computers, not just young people. Even at
work, it can be quite useful to know which tasks tend to be
the bigger time sinks. For such purposes it is useful to run
<code>xdotool</code> in a loop polling for the title of the active
window, which tends to correlate pretty well with the task at hand, e.g.</p>
<ul>
<li>name of the video game being played</li>
<li>title of the video being watched (YouTube, Netflix, etc.)</li>
<li>name of the file being edited (Blender, GIMP, Krita, etc.)</li>
</ul>
<p>For this purpose, add <code>poll-focused-window-every-second</code> and <code>report-daily-time-per-focused-window</code> as login scripts to
capture a screenshot of the full screen and then make a
timelapse video of each desktop session. This will cause a
small CPU spike when logging in, but is not too noticeable</p>
<h4 id="poll-focused-window-every-second"><code>poll-focused-window-every-second</code></h4>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span>
<span class="normal"><a href="#__codelineno-51-19">19</a></span>
<span class="normal"><a href="#__codelineno-51-20">20</a></span>
<span class="normal"><a href="#__codelineno-51-21">21</a></span>
<span class="normal"><a href="#__codelineno-51-22">22</a></span>
<span class="normal"><a href="#__codelineno-51-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="c1">#</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="c1"># Poll every second for the name of the active window, store it in a log file.</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="nv">LDIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/xdotool-logs"</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="nv">TSTM</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>date<span class="w"> </span>+<span class="s1">'%Y-%m-%d-%H-%M-%S'</span><span class="k">)</span><span class="s2">"</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="nv">LOGF</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">TSTM</span><span class="si">}</span><span class="s2">.txt"</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8"></a>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="k">while</span><span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">  </span><span class="c1"># Skip if screen is locked (KDE Plasma)</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span>qdbus<span class="w"> </span>org.freedesktop.ScreenSaver<span class="w"> </span>/ScreenSaver<span class="w"> </span>org.freedesktop.ScreenSaver.GetActive<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">    </span>grep<span class="w"> </span>-q<span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">    </span><span class="k">continue</span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">  </span><span class="nv">wid</span><span class="o">=</span><span class="k">$(</span>xdotool<span class="w"> </span>getwindowfocus<span class="w"> </span>-f<span class="k">)</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="w">    </span><span class="k">continue</span>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="w">  </span><span class="nv">wname</span><span class="o">=</span><span class="k">$(</span>xdotool<span class="w"> </span>getwindowname<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">wname</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">LOGF</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="w">  </span>sleep<span class="w"> </span><span class="m">1</span>
</span><span id="__span-51-23"><a id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="k">done</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="report-daily-time-per-focused-window"><code>report-daily-time-per-focused-window</code></h4>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span>
<span class="normal"><a href="#__codelineno-52-11">11</a></span>
<span class="normal"><a href="#__codelineno-52-12">12</a></span>
<span class="normal"><a href="#__codelineno-52-13">13</a></span>
<span class="normal"><a href="#__codelineno-52-14">14</a></span>
<span class="normal"><a href="#__codelineno-52-15">15</a></span>
<span class="normal"><a href="#__codelineno-52-16">16</a></span>
<span class="normal"><a href="#__codelineno-52-17">17</a></span>
<span class="normal"><a href="#__codelineno-52-18">18</a></span>
<span class="normal"><a href="#__codelineno-52-19">19</a></span>
<span class="normal"><a href="#__codelineno-52-20">20</a></span>
<span class="normal"><a href="#__codelineno-52-21">21</a></span>
<span class="normal"><a href="#__codelineno-52-22">22</a></span>
<span class="normal"><a href="#__codelineno-52-23">23</a></span>
<span class="normal"><a href="#__codelineno-52-24">24</a></span>
<span class="normal"><a href="#__codelineno-52-25">25</a></span>
<span class="normal"><a href="#__codelineno-52-26">26</a></span>
<span class="normal"><a href="#__codelineno-52-27">27</a></span>
<span class="normal"><a href="#__codelineno-52-28">28</a></span>
<span class="normal"><a href="#__codelineno-52-29">29</a></span>
<span class="normal"><a href="#__codelineno-52-30">30</a></span>
<span class="normal"><a href="#__codelineno-52-31">31</a></span>
<span class="normal"><a href="#__codelineno-52-32">32</a></span>
<span class="normal"><a href="#__codelineno-52-33">33</a></span>
<span class="normal"><a href="#__codelineno-52-34">34</a></span>
<span class="normal"><a href="#__codelineno-52-35">35</a></span>
<span class="normal"><a href="#__codelineno-52-36">36</a></span>
<span class="normal"><a href="#__codelineno-52-37">37</a></span>
<span class="normal"><a href="#__codelineno-52-38">38</a></span>
<span class="normal"><a href="#__codelineno-52-39">39</a></span>
<span class="normal"><a href="#__codelineno-52-40">40</a></span>
<span class="normal"><a href="#__codelineno-52-41">41</a></span>
<span class="normal"><a href="#__codelineno-52-42">42</a></span>
<span class="normal"><a href="#__codelineno-52-43">43</a></span>
<span class="normal"><a href="#__codelineno-52-44">44</a></span>
<span class="normal"><a href="#__codelineno-52-45">45</a></span>
<span class="normal"><a href="#__codelineno-52-46">46</a></span>
<span class="normal"><a href="#__codelineno-52-47">47</a></span>
<span class="normal"><a href="#__codelineno-52-48">48</a></span>
<span class="normal"><a href="#__codelineno-52-49">49</a></span>
<span class="normal"><a href="#__codelineno-52-50">50</a></span>
<span class="normal"><a href="#__codelineno-52-51">51</a></span>
<span class="normal"><a href="#__codelineno-52-52">52</a></span>
<span class="normal"><a href="#__codelineno-52-53">53</a></span>
<span class="normal"><a href="#__codelineno-52-54">54</a></span>
<span class="normal"><a href="#__codelineno-52-55">55</a></span>
<span class="normal"><a href="#__codelineno-52-56">56</a></span>
<span class="normal"><a href="#__codelineno-52-57">57</a></span>
<span class="normal"><a href="#__codelineno-52-58">58</a></span>
<span class="normal"><a href="#__codelineno-52-59">59</a></span>
<span class="normal"><a href="#__codelineno-52-60">60</a></span>
<span class="normal"><a href="#__codelineno-52-61">61</a></span>
<span class="normal"><a href="#__codelineno-52-62">62</a></span>
<span class="normal"><a href="#__codelineno-52-63">63</a></span>
<span class="normal"><a href="#__codelineno-52-64">64</a></span>
<span class="normal"><a href="#__codelineno-52-65">65</a></span>
<span class="normal"><a href="#__codelineno-52-66">66</a></span>
<span class="normal"><a href="#__codelineno-52-67">67</a></span>
<span class="normal"><a href="#__codelineno-52-68">68</a></span>
<span class="normal"><a href="#__codelineno-52-69">69</a></span>
<span class="normal"><a href="#__codelineno-52-70">70</a></span>
<span class="normal"><a href="#__codelineno-52-71">71</a></span>
<span class="normal"><a href="#__codelineno-52-72">72</a></span>
<span class="normal"><a href="#__codelineno-52-73">73</a></span>
<span class="normal"><a href="#__codelineno-52-74">74</a></span>
<span class="normal"><a href="#__codelineno-52-75">75</a></span>
<span class="normal"><a href="#__codelineno-52-76">76</a></span>
<span class="normal"><a href="#__codelineno-52-77">77</a></span>
<span class="normal"><a href="#__codelineno-52-78">78</a></span>
<span class="normal"><a href="#__codelineno-52-79">79</a></span>
<span class="normal"><a href="#__codelineno-52-80">80</a></span>
<span class="normal"><a href="#__codelineno-52-81">81</a></span>
<span class="normal"><a href="#__codelineno-52-82">82</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="c1">#</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="c1"># Analyze time spent per window for all days up to (and including) yesterday.</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="c1"># Produce output in TSV format; with .csv file names for easier import in office suites.</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5"></a>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="nv">LDIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/xdotool-logs"</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">/tsv"</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8"></a>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9"></a>rewrite_window_name<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11"></a><span class="w">    </span>sed<span class="w"> </span><span class="s1">'s/ - Google Chrome//'</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12"></a><span class="w">    </span>sed<span class="w"> </span><span class="s1">'s/ - Google Docs//'</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13"></a><span class="o">}</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14"></a>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15"></a>first_window_name<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16"></a><span class="w">  </span><span class="nv">wid</span><span class="o">=</span><span class="nv">$1</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17"></a><span class="w">  </span><span class="nv">logf</span><span class="o">=</span><span class="nv">$2</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18"></a><span class="w">  </span>grep<span class="w"> </span><span class="s2">"^</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> "</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19"></a><span class="w">    </span>sed<span class="w"> </span><span class="s2">"s/^</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> //"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20"></a><span class="w">    </span>grep<span class="w"> </span>-Ev<span class="w"> </span><span class="s1">'^Untitled - Google Chrome$|^New Tab - Google Chrome$|^New Incognito Tab$'</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21"></a><span class="w">    </span>head<span class="w"> </span>-1
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22"></a><span class="o">}</span>
</span><span id="__span-52-23"><a id="__codelineno-52-23" name="__codelineno-52-23"></a>
</span><span id="__span-52-24"><a id="__codelineno-52-24" name="__codelineno-52-24"></a>most_time_spent_window_name<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-52-25"><a id="__codelineno-52-25" name="__codelineno-52-25"></a><span class="w">  </span><span class="nv">wid</span><span class="o">=</span><span class="nv">$1</span>
</span><span id="__span-52-26"><a id="__codelineno-52-26" name="__codelineno-52-26"></a><span class="w">  </span><span class="nv">logf</span><span class="o">=</span><span class="nv">$2</span>
</span><span id="__span-52-27"><a id="__codelineno-52-27" name="__codelineno-52-27"></a><span class="w">  </span>grep<span class="w"> </span><span class="s2">"^</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> *"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-28"><a id="__codelineno-52-28" name="__codelineno-52-28"></a><span class="w">    </span>sed<span class="w"> </span><span class="s2">"s/^</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> //"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-29"><a id="__codelineno-52-29" name="__codelineno-52-29"></a><span class="w">    </span>grep<span class="w"> </span>-Ev<span class="w"> </span><span class="s1">'^Untitled - Google Chrome$|^New Tab - Google Chrome$|^New Incognito Tab$'</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-30"><a id="__codelineno-52-30" name="__codelineno-52-30"></a><span class="w">    </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-nr<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-31"><a id="__codelineno-52-31" name="__codelineno-52-31"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>line<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-52-32"><a id="__codelineno-52-32" name="__codelineno-52-32"></a><span class="w">      </span><span class="nv">secs</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-Eo<span class="w"> </span><span class="s1">'[0-9]+'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="k">)</span>
</span><span id="__span-52-33"><a id="__codelineno-52-33" name="__codelineno-52-33"></a><span class="w">      </span><span class="nv">title</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s2">"s/</span><span class="si">${</span><span class="nv">secs</span><span class="si">}</span><span class="s2">//"</span><span class="k">)</span>
</span><span id="__span-52-34"><a id="__codelineno-52-34" name="__codelineno-52-34"></a><span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">title</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-35"><a id="__codelineno-52-35" name="__codelineno-52-35"></a><span class="w">    </span><span class="k">done</span>
</span><span id="__span-52-36"><a id="__codelineno-52-36" name="__codelineno-52-36"></a><span class="o">}</span>
</span><span id="__span-52-37"><a id="__codelineno-52-37" name="__codelineno-52-37"></a>
</span><span id="__span-52-38"><a id="__codelineno-52-38" name="__codelineno-52-38"></a><span class="c1"># Find all dates (up to yesterday) missing TSV report.</span>
</span><span id="__span-52-39"><a id="__codelineno-52-39" name="__codelineno-52-39"></a><span class="nv">today</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+<span class="s2">"%Y-%m-%d"</span><span class="k">)</span>
</span><span id="__span-52-40"><a id="__codelineno-52-40" name="__codelineno-52-40"></a>find<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">"*.txt"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-41"><a id="__codelineno-52-41" name="__codelineno-52-41"></a><span class="w">  </span>grep<span class="w"> </span>-o<span class="w"> </span><span class="s1">'/2...-..-..'</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-42"><a id="__codelineno-52-42" name="__codelineno-52-42"></a><span class="w">  </span>sed<span class="w"> </span><span class="s1">'s/\///'</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-43"><a id="__codelineno-52-43" name="__codelineno-52-43"></a><span class="w">  </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">today</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-44"><a id="__codelineno-52-44" name="__codelineno-52-44"></a><span class="w">  </span>sort<span class="w"> </span>-u<span class="w"> </span><span class="p">|</span>
</span><span id="__span-52-45"><a id="__codelineno-52-45" name="__codelineno-52-45"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>date<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-52-46"><a id="__codelineno-52-46" name="__codelineno-52-46"></a><span class="w">    </span><span class="nv">tsvout</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">/tsv/</span><span class="si">${</span><span class="nv">date</span><span class="si">}</span><span class="s2">.csv"</span>
</span><span id="__span-52-47"><a id="__codelineno-52-47" name="__codelineno-52-47"></a><span class="w">    </span><span class="c1"># Avoid re-processing existing reports.</span>
</span><span id="__span-52-48"><a id="__codelineno-52-48" name="__codelineno-52-48"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">tsvout</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-52-49"><a id="__codelineno-52-49" name="__codelineno-52-49"></a><span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Report for </span><span class="si">${</span><span class="nv">date</span><span class="si">}</span><span class="s2"> already in </span><span class="si">${</span><span class="nv">tsvout</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-50"><a id="__codelineno-52-50" name="__codelineno-52-50"></a><span class="w">      </span><span class="k">continue</span>
</span><span id="__span-52-51"><a id="__codelineno-52-51" name="__codelineno-52-51"></a><span class="w">    </span><span class="k">fi</span>
</span><span id="__span-52-52"><a id="__codelineno-52-52" name="__codelineno-52-52"></a><span class="w">    </span><span class="c1"># Produce output in TSV format, leaving the 'task' column blank.</span>
</span><span id="__span-52-53"><a id="__codelineno-52-53" name="__codelineno-52-53"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">"Date\tDuration\tTask\tOpening\tMost time spent in"</span><span class="w"> </span>&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">tsvout</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-54"><a id="__codelineno-52-54" name="__codelineno-52-54"></a><span class="w">    </span>find<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">LDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">date</span><span class="si">}</span><span class="s2">-*"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>logf<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-52-55"><a id="__codelineno-52-55" name="__codelineno-52-55"></a><span class="w">      </span>cut<span class="w"> </span>-f1<span class="w"> </span>-d<span class="s1">' '</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-u<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s1">'^ $'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s1">'^$'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>wid<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-52-56"><a id="__codelineno-52-56" name="__codelineno-52-56"></a><span class="w">        </span><span class="nv">secs</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s2">"^</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2"> "</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-52-57"><a id="__codelineno-52-57" name="__codelineno-52-57"></a><span class="w">        </span><span class="c1"># Skip windows with less than 10 min.</span>
</span><span id="__span-52-58"><a id="__codelineno-52-58" name="__codelineno-52-58"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">secs</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-lt<span class="w"> </span><span class="m">600</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-52-59"><a id="__codelineno-52-59" name="__codelineno-52-59"></a><span class="w">          </span><span class="k">continue</span>
</span><span id="__span-52-60"><a id="__codelineno-52-60" name="__codelineno-52-60"></a><span class="w">        </span><span class="k">fi</span>
</span><span id="__span-52-61"><a id="__codelineno-52-61" name="__codelineno-52-61"></a><span class="w">        </span><span class="c1"># Find the first (not useless) title and the one with the most time.</span>
</span><span id="__span-52-62"><a id="__codelineno-52-62" name="__codelineno-52-62"></a><span class="w">        </span><span class="nv">first</span><span class="o">=</span><span class="k">$(</span>rewrite_window_name<span class="w"> </span><span class="s2">"</span><span class="k">$(</span>first_window_name<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-52-63"><a id="__codelineno-52-63" name="__codelineno-52-63"></a><span class="w">        </span><span class="nv">mostt</span><span class="o">=</span><span class="k">$(</span>rewrite_window_name<span class="w"> </span><span class="s2">"</span><span class="k">$(</span>most_time_spent_window_name<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">wid</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">logf</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-52-64"><a id="__codelineno-52-64" name="__codelineno-52-64"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">first</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">mostt</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-52-65"><a id="__codelineno-52-65" name="__codelineno-52-65"></a><span class="w">          </span><span class="nv">mostt</span><span class="o">=</span><span class="s2">""</span>
</span><span id="__span-52-66"><a id="__codelineno-52-66" name="__codelineno-52-66"></a><span class="w">        </span><span class="k">fi</span>
</span><span id="__span-52-67"><a id="__codelineno-52-67" name="__codelineno-52-67"></a><span class="w">        </span><span class="nv">hours</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-52-68"><a id="__codelineno-52-68" name="__codelineno-52-68"></a><span class="w">        </span><span class="nv">mins</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-52-69"><a id="__codelineno-52-69" name="__codelineno-52-69"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${</span><span class="nv">secs</span><span class="si">}</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">3600</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-52-70"><a id="__codelineno-52-70" name="__codelineno-52-70"></a><span class="w">          </span><span class="nv">hours</span><span class="o">=</span><span class="k">$((</span><span class="nv">secs</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">3600</span><span class="k">))</span>
</span><span id="__span-52-71"><a id="__codelineno-52-71" name="__codelineno-52-71"></a><span class="w">          </span><span class="nv">secs</span><span class="o">=</span><span class="k">$((</span><span class="nv">secs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">hours</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">3600</span><span class="k">))</span>
</span><span id="__span-52-72"><a id="__codelineno-52-72" name="__codelineno-52-72"></a><span class="w">        </span><span class="k">fi</span>
</span><span id="__span-52-73"><a id="__codelineno-52-73" name="__codelineno-52-73"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${</span><span class="nv">secs</span><span class="si">}</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-52-74"><a id="__codelineno-52-74" name="__codelineno-52-74"></a><span class="w">          </span><span class="nv">mins</span><span class="o">=</span><span class="k">$((</span><span class="nv">secs</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-52-75"><a id="__codelineno-52-75" name="__codelineno-52-75"></a><span class="w">          </span><span class="nv">secs</span><span class="o">=</span><span class="k">$((</span><span class="nv">secs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">mins</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-52-76"><a id="__codelineno-52-76" name="__codelineno-52-76"></a><span class="w">        </span><span class="k">fi</span>
</span><span id="__span-52-77"><a id="__codelineno-52-77" name="__codelineno-52-77"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">date</span><span class="si">}</span><span class="s2">\t</span><span class="si">${</span><span class="nv">hours</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">mins</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">secs</span><span class="si">}</span><span class="s2">\t\t</span><span class="si">${</span><span class="nv">first</span><span class="si">}</span><span class="s2">\t</span><span class="si">${</span><span class="nv">mostt</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-78"><a id="__codelineno-52-78" name="__codelineno-52-78"></a><span class="w">      </span><span class="k">done</span>
</span><span id="__span-52-79"><a id="__codelineno-52-79" name="__codelineno-52-79"></a><span class="w">    </span><span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-nr<span class="w"> </span>-k<span class="w"> </span><span class="m">2</span><span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">tsvout</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-80"><a id="__codelineno-52-80" name="__codelineno-52-80"></a>
</span><span id="__span-52-81"><a id="__codelineno-52-81" name="__codelineno-52-81"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Report for </span><span class="si">${</span><span class="nv">date</span><span class="si">}</span><span class="s2"> ready in </span><span class="si">${</span><span class="nv">tsvout</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-52-82"><a id="__codelineno-52-82" name="__codelineno-52-82"></a><span class="w">  </span><span class="k">done</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="desktop-timelapses">Desktop Timelapses</h3>
<p>Having a timelapse of what has been on screen can be useful
for both the young artist and their responsible parents,
in fact most likely useful to showcase the artist's process
through a lenghty work of digital art than to the parents to
gain <em>detailed</em> insights into any other activities.</p>
<p>For either purpose, add <code>take-a-screenshot-every-second</code> and <code>make-all-timelapses-from-screenshots</code> as login scripts to
capture a screenshot of the full screen and then make a
timelapse video of each desktop session. This will cause a
small CPU spike when logging in, but is not too noticeable
since it only takes 2 or 3 CPU cores for a few minutes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>make-all-timelapses-from-screenshots</code> depends on
<code>make-one-timelapse-from-screenshots</code> and runs 4 instances of it in parallel.</p>
</div>
<h4 id="take-a-screenshot-every-second"><code>take-a-screenshot-every-second</code></h4>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span>
<span class="normal"><a href="#__codelineno-53-20">20</a></span>
<span class="normal"><a href="#__codelineno-53-21">21</a></span>
<span class="normal"><a href="#__codelineno-53-22">22</a></span>
<span class="normal"><a href="#__codelineno-53-23">23</a></span>
<span class="normal"><a href="#__codelineno-53-24">24</a></span>
<span class="normal"><a href="#__codelineno-53-25">25</a></span>
<span class="normal"><a href="#__codelineno-53-26">26</a></span>
<span class="normal"><a href="#__codelineno-53-27">27</a></span>
<span class="normal"><a href="#__codelineno-53-28">28</a></span>
<span class="normal"><a href="#__codelineno-53-29">29</a></span>
<span class="normal"><a href="#__codelineno-53-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="c1"># Do not run again if already running.</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="nv">p</span><span class="o">=</span><span class="k">$(</span>pidof<span class="w"> </span>-x<span class="w"> </span><span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="nv">n</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">p</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-w<span class="k">)</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">n</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Already running! (</span><span class="si">${</span><span class="nv">p</span><span class="si">}</span><span class="s2">)"</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="k">fi</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="c1"># Where to store screenshots. Create one directory per start time.</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="nv">START</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+<span class="s2">"%Y_%m_%d_%H_%M_%S"</span><span class="k">)</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="nv">BASEDIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/Videos/Desktop_Timelapse"</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="nv">OUTDIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">BASEDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">START</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="c1"># Write first to the shared memory filesystem (faster).</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="nv">TMPDIR</span><span class="o">=</span><span class="s2">"/dev/shm/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">/screenshot-every-second/</span><span class="si">${</span><span class="nv">START</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">TMPDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">OUTDIR</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="k">while</span><span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="w">  </span><span class="c1"># Take a screenshot, but only if the screen is not locked.</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span>dbus-send<span class="w"> </span>--session<span class="w"> </span>--dest<span class="o">=</span>org.freedesktop.ScreenSaver<span class="w"> </span>--type<span class="o">=</span>method_call<span class="w"> </span>--print-reply<span class="w"> </span>/org/freedesktop/ScreenSaver<span class="w"> </span>org.freedesktop.ScreenSaver.GetActive<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-q<span class="w"> </span><span class="s1">'boolean false'</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22"></a><span class="w">    </span>scrot<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">TMPDIR</span><span class="si">}</span><span class="s2">/%Y-%m-%d-%H-%M-%S.jpg"</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24"></a><span class="w">  </span><span class="c1"># Delay for (nearly) a second. This is so that system load is not a problem.</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25"></a><span class="w">  </span>sleep<span class="w"> </span><span class="m">0</span>.9
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26"></a><span class="w">  </span><span class="c1"># Save files to final destination every minute.</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>date<span class="w"> </span>+<span class="s1">'%S'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">'s/^0//'</span><span class="k">)</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28"></a><span class="w">    </span>mv<span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">TMPDIR</span><span class="si">}</span><span class="s2">/*.jpg"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">OUTDIR</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30"></a><span class="k">done</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="make-all-timelapses-from-screenshots"><code>make-all-timelapses-from-screenshots</code></h4>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span>
<span class="normal"><a href="#__codelineno-54-14">14</a></span>
<span class="normal"><a href="#__codelineno-54-15">15</a></span>
<span class="normal"><a href="#__codelineno-54-16">16</a></span>
<span class="normal"><a href="#__codelineno-54-17">17</a></span>
<span class="normal"><a href="#__codelineno-54-18">18</a></span>
<span class="normal"><a href="#__codelineno-54-19">19</a></span>
<span class="normal"><a href="#__codelineno-54-20">20</a></span>
<span class="normal"><a href="#__codelineno-54-21">21</a></span>
<span class="normal"><a href="#__codelineno-54-22">22</a></span>
<span class="normal"><a href="#__codelineno-54-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="nv">BASEDIR</span><span class="o">=</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/Videos/Desktop_Timelapse
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="nv">CWD</span><span class="o">=</span><span class="k">$(</span>dirname<span class="w"> </span><span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="c1"># Wait a bit in case a new directory is being created, because that is the one</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="c1"># that should be ignored below.</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7"></a>sleep<span class="w"> </span><span class="m">2</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8"></a>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9"></a><span class="c1"># Create a timelapse from the screenshot in each directory in BASEDIR.</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10"></a><span class="c1"># Ignore the last one (presumed incomplete).</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11"></a><span class="nv">last</span><span class="o">=</span><span class="k">$(</span>find<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">BASEDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">"20*"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12"></a>find<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">BASEDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">"20*"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13"></a><span class="w">  </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">last</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14"></a><span class="w">  </span>xargs<span class="w"> </span>-P<span class="w"> </span><span class="m">4</span><span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">CWD</span><span class="si">}</span><span class="s2">/make-one-timelapse-from-screenshots"</span>
</span><span id="__span-54-15"><a id="__codelineno-54-15" name="__codelineno-54-15"></a>
</span><span id="__span-54-16"><a id="__codelineno-54-16" name="__codelineno-54-16"></a><span class="c1"># Clean up discarded timelapses (zero-size videos).</span>
</span><span id="__span-54-17"><a id="__codelineno-54-17" name="__codelineno-54-17"></a>find<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">BASEDIR</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>-size<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>f<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-54-18"><a id="__codelineno-54-18" name="__codelineno-54-18"></a><span class="w">  </span><span class="nv">b</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">f</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span>
</span><span id="__span-54-19"><a id="__codelineno-54-19" name="__codelineno-54-19"></a><span class="w">  </span><span class="nv">d</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">b</span><span class="p">/.avi/</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-54-20"><a id="__codelineno-54-20" name="__codelineno-54-20"></a><span class="w">  </span><span class="nv">td</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">BASEDIR</span><span class="si">}</span><span class="s2">/trash/</span><span class="si">${</span><span class="nv">d</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-54-21"><a id="__codelineno-54-21" name="__codelineno-54-21"></a><span class="w">  </span><span class="nb">test</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">td</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">td</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-54-22"><a id="__codelineno-54-22" name="__codelineno-54-22"></a><span class="w">  </span><span class="nb">test</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">f</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">f</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-54-23"><a id="__codelineno-54-23" name="__codelineno-54-23"></a><span class="k">done</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="make-one-timelapse-from-screenshots"><code>make-one-timelapse-from-screenshots</code></h4>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="c1"># Create a timelapse from the screenshot in one directory.</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="c1"># At a framerate of 30 FPS; if screenshots are taken every second, 2 minutes of timelapse represents 1 hour.</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="c1"># Screenshtos must be all of the same pixel size, otherwise ffmpeg will fail.</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="nv">day</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="nv">trash</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>dirname<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">day</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span><span class="s2">/trash"</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">trash</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9"></a>ffmpeg<span class="w"> </span>-vsync<span class="w"> </span><span class="m">0</span><span class="w"> </span>-framerate<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10"></a><span class="w">  </span>-pattern_type<span class="w"> </span>glob<span class="w"> </span>-i<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">day</span><span class="si">}</span><span class="s2">/*.jpg"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11"></a><span class="w">  </span>-b:v<span class="w"> </span>5M<span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-preset<span class="w"> </span>ultrafast<span class="w"> </span><span class="se">\</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="w">  </span>-y<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">day</span><span class="si">}</span><span class="s2">"</span>.avi<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mv<span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">day</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">trash</span><span class="si">}</span><span class="s2">"</span>
</span></code></pre></div></td></tr></table></div></div>


  


  



      
    </article>
  </div>

          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019-2025 Ponder Stibbons
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["content.code.copy", "search.highlight", "search.suggest"], "search": "../../../../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>